{"version":3,"sources":["app/hooks.ts","features/calculations/damageTypes.ts","features/utility/map.ts","features/calculations/enchants.ts","features/calculations/armor.ts","features/calculations/damage.ts","features/calculations/effects.ts","features/calculations/entity.ts","features/activeSlice.ts","features/utility/Icons.tsx","features/images/full_armor.png","features/images/half_armor.png","features/images/no_armor.png","features/utility/Parts.tsx","features/images/half_heart_lg.png","features/images/full_heart.png","features/images/half_heart.png","features/utility/maths.ts","features/utility/Utils.ts","features/calculator/SyncSave.tsx","features/setups/EnchantContainer.tsx","features/weapon/weapon.ts","features/calculator/DamageGraph.tsx","features/weapon/WeaponDamageGraph.tsx","features/weapon/WeaponGraph.tsx","features/weapon/WeaponEditor.tsx","features/calculator/DamageSummary.tsx","features/explosion/Explosion.tsx","features/fall/Fall.tsx","features/utility/EditInPlace.tsx","features/general/GeneralCalculator.tsx","features/calculator/DamageCalculator.tsx","features/setups/ArmorSlot.tsx","features/setups/EffectContainer.tsx","features/setups/EntityContainer.tsx","features/setups/SetupContainer.tsx","features/simulator/DamageCard.tsx","features/simulator/DragContainer.tsx","features/simulator/Simulator.tsx","features/simulator/SimulatorHeader.tsx","App.tsx","app/store.ts","serviceWorker.ts","index.tsx"],"names":["useAppDispatch","useDispatch","useAppSelector","useSelector","FIRE","MELEE","FALL","EXPLOSION","PROJECTILE","MAGIC","DAMAGE_ARRAY","baseDamageType","val","item","includes","getValue","e","type","fallback","get","value","key","set","push","remove","index","forEach","i","splice","exclusion","exclude","temp","flag","copy","hasEnchantment","name","getEnchantment","PROTECTION","PROJECTILE_PROTECTION","BLAST_PROTECTION","FIRE_PROTECTION","FEATHER_FALLING","SHARPNESS","NONE","ENCHANT_ARRAY","LEATHER","CHAINMAIL","IRON","DIAMOND","GOLDEN","NETHERITE","TURTLE","ELYTRA","HELMET","CHESTPLATE","LEGGINGS","BOOTS","MATERIAL_ARRAY","PIECE_ARRAY","armor_data","Map","make","piece","enchants","enchantments","armor","toughness","valid","getValid","setType","valids","a","tough","getTough","preset","getSetEPF","epf","d","getEPF","Math","min","getSetArmor","total","getSetToughness","invalidEnchants","limit","length","find","items","id","equals","dmg1","dmg2","amount","ticks","RESISTANCE","HEALTH_BOOST","ABSORPTION","STRENGTH","WEAKNESS","EFFECTS","ENTITY_EFFECTS","setEffect","getEffect","getEffectLevel","nomar","require","maxHealth","effects","summary","str","charAt","maxSetups","setups","initialState","family","damage","damages","activeSlice","createSlice","reducers","state","action","p","payload","entity","slot","setEnchant","level","removeEnchant","removeEffect","f","setDamageType","setDamage","setDamageTicks","toggleDamage","visible","addDamageTimes","times","change","removeSetup","addSetup","saveDamage","dmg","removeDamage","moveDamage","moved","from","to","actions","selectEntity","active","selectDamage","selectDamages","Icon","props","className","React","Component","Tip","useState","tooltipOpen","setTooltipOpen","Tooltip","placement","pos","isOpen","target","toggle","sync","dispatch","setter","DropInput","DropdownButton","title","selected","inputs","map","Dropdown","Item","onClick","onDropClicked","text","Collapseable","defaultOpen","setToggle","inner","override","Fragment","Button","newState","handleCollapse","options","Collapse","in","HalfHeart","Image","src","width","height","HealthBar","DynamicBar","health","full","half","ArmorBar","max","full_armor","half_armor","empty","no_armor","ToughnessBar","round","floor","elements","left","EPFFactor","resistanceFactor","affectedByArmor","takeDamage","legacy","functionPlot","$eval","builtIn","fn","damageEquation","x","EPF","res","def","damageEquationLegacy","Color","range","arr","num","Number","EPSILON","getColor","rgb","hsl","bound","getPresetColor","globals","COLORS","SyncSave","stagedDamage","stageDamage","ButtonGroup","disabled","SyncSaveRow","Row","Col","md","lg","SyncSaveColumn","label","EnchantContainer","ItemBadge","getValidValues","onValueChange","onDelete","Add","defaultName","defaultValue","validate","alreadyApplied","applied","ench","getLeft","onSave","editing","setEditing","setName","setLevel","reset","useEffect","onBlur","relatedTarget","currentTarget","node","parentNode","focusInCurrentTarget","autoFocus","_","STONE","WOODEN","SWORD","TRIDENT","SHOVEL","PICKAXE","AXE","HOE","FIST","WEAPON_DATA","WEAPONS","MATERIALS","WEAPON_MATERIALS","WEAPON_SPEEDS","defaultWeapon","material","ticksSinceLast","critical","sharpness","strength","weakness","attackSpeed","makeWeapon","w","indexInto","weaponPreset","weaponSpeedPreset","fullChargeDamage","cloneDeep","getDamage","getEnchantEquation","getDamageMultiplierEquation","getCriticalEquation","getDamageEquation","multiplier","getStrengthBonus","getWeaknessBonus","getTicks","seconds","getSeconds","toString","percentCharge","ticksToFullCharge","CollapsableGraph","size","setSize","useLayoutEffect","updateSize","window","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","annotations","yAxis","domain","xAxis","grid","data","nSamples","refresh","document","getElementById","widthReference","clientWidth","graphType","noGutters","hidden","DamageGraph","xs","getFunctions","getPercents","WeaponDamageGraph","attackDamageEquation","weapon","WeaponGraph","eq","replaceAll","WeaponEditor","globalDamage","setActualWeapon","setWeapon","c","getDamageObj","Form","Check","custom","inline","checked","onChange","step","precision","valueAsNumber","stringValue","el","format","fullCharge","TAKEN","SETTINGS","DamageSummaryTable","entities","show","setShow","Table","DamageHeader","DamageSummary","style","borderLeftColor","borderLeftWidth","borderLeftStyle","DamageDisplay","getResist","backgroundColor","Explosion","localDamage","power","setPower","distance","setDistance","exposure","setExposure","EASY","NORMAL","HARD","difficulty","setDifficulty","explosionDamage","radius","impact","split","slice","join","update","$set","parseInt","Fall","setActualDamage","setHeight","fallDamage","minFallDamage","EditInPlace","handleFocus","bind","handleChange","dispatchChange","html","display","evt","this","setState","trim","save","shown","spellCheck","onFocus","textContent","tagName","GeneralCalculator","Element","DamageCalculator","ArmorSlot","getFormatted","sm","onMaterialChange","EffectContainer","other","EntityContainer","SetupContainer","setActive","open","border","padding","marginBottom","cursor","Card","moveCard","ref","useRef","useDrop","accept","collect","monitor","handlerId","getHandlerId","hover","current","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","drop","useDrag","isDragging","opacity","drag","data-handler-id","defaultChecked","DragContainer","card","renderCard","Simulator","percent","setPercent","showChanges","setShowChanges","showSteps","setShowSteps","renderHeader","borderBottomColor","borderBottomWidth","borderBottomStyle","color","hp","time","maxHp","initial","SimulatorRow","deltaTime","newTime","deltaHp","newHp","showResults","rows","damageItem","origin","addThis","elementwiseAdd","renderDamages","renderBody","setHover","getPercent","getContent","renderName","substring","onMouseEnter","onMouseLeave","Scroll","scroller","SimulatorHeader","scrollTo","duration","smooth","App","Container","fluid","Navbar","bg","expand","Nav","xl","DndProvider","backend","HTML5Backend","store","configureStore","reducer","activeReducer","Boolean","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.8d76aa27.chunk.js","sourcesContent":["import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","export const FIRE = 'Fire';\r\nexport const MELEE = 'Melee';\r\nexport const FALL = 'Fall';\r\nexport const EXPLOSION = 'Explosion';\r\nexport const PROJECTILE = 'Projectile';\r\nexport const MAGIC = 'Magic';\r\n\r\nexport const DAMAGE_ARRAY = [MELEE, FALL, EXPLOSION, FIRE, PROJECTILE, MAGIC];\r\n\r\nexport function baseDamageType(val: string) {\r\n    for (let item of DAMAGE_ARRAY) {\r\n        if (val.includes(item)) {\r\n            return item;\r\n        }\r\n    }\r\n    return \"Standard Damage\";\r\n}","export interface Entry<K,V>{\r\n    key: K,\r\n    value: V\r\n}\r\nexport function shallowCopy<K,V>(item: Entry<K,V>) {\r\n    return {key: item.key, value: item.value};\r\n}\r\nexport function has<K,V>(e: Entry<K, V>[], type: K) : boolean {\r\n    return get<K,V>(e, type) ? true : false;\r\n}\r\nexport function getValue<K,V>(e: Entry<K, V>[], type: K, fallback: V) : V {\r\n    if (get<K,V>(e, type)) {\r\n        return get<K,V>(e, type)!.value;\r\n    }\r\n    return fallback;\r\n}\r\nexport function get<K,V>(e: Entry<K, V>[], type: K) : Entry<K,V> | undefined {\r\n    for (let item of e) {\r\n        if (item.key === type) {\r\n            return item;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexport function set<K,V>(e: Entry<K, V>[], type: K, value: V) {\r\n    if (get(e, type)) {\r\n        get(e, type)!.value = value;\r\n    } else {\r\n        e.push({key: type, value: value});\r\n    }\r\n} \r\nexport function remove<K,V>(e: Entry<K,V>[], type: K) {\r\n    let index = -1;\r\n    e.forEach( (item, i) => {\r\n        if (item.key === type) {\r\n            index = i;\r\n        }\r\n    })\r\n    e.splice(index, 1);\r\n}\r\nexport function exclusion<K,V>(e: Entry<K,V>[], exclude: Entry<K,V>[]): K[] {\r\n    let temp: K[] = [];\r\n    for (let item of e) {\r\n        let flag = true;\r\n        for (let excluded of exclude) {\r\n            flag = (excluded.key !== item.key) && flag;\r\n        }\r\n        if (flag) {\r\n            temp.push(item.key);\r\n        }\r\n    }\r\n    return temp;\r\n}","import { Entry, exclusion, getValue, remove, set, shallowCopy } from \"../utility/map\";\r\n\r\nexport interface Enchantment extends Entry<string, number> {\r\n\r\n}\r\nexport function makeEnchant(name: string, level: number) {\r\n    return {key: name, value: level};\r\n}\r\nexport function copy(e : Enchantment) {\r\n    return shallowCopy(e);\r\n}\r\nexport function hasEnchantment(e : Enchantment[], name : string) : boolean{\r\n    return getEnchantment(e, name) ? true: false;\r\n}\r\nexport function getEnchantment(e : Enchantment[], name : string) : number {\r\n    return getValue(e, name, 0);\r\n}\r\nexport function setEnchantment(e: Enchantment[], name: string, level: number) {\r\n    set(e, name, level);\r\n}\r\nexport function removeEnchant(e: Enchantment[], name: string) {\r\n    remove(e, name);\r\n}\r\nexport function excludeEnchant(e: Enchantment[], exclude: Enchantment[]) {\r\n    return exclusion(e, exclude);\r\n}\r\nexport const PROTECTION = {key:'protection', value: 4};\r\nexport const PROJECTILE_PROTECTION = {key:'projectile protection', value: 4};\r\nexport const BLAST_PROTECTION = {key: 'blast protection', value: 4};\r\nexport const FIRE_PROTECTION = {key: 'fire protection', value: 4};\r\nexport const FEATHER_FALLING = {key: 'feather falling', value: 4};\r\n\r\nexport const SHARPNESS = {key: 'sharpness', value: 5};\r\n\r\nexport const NONE = {key: \"None\", value: 5};\r\n\r\nexport const ENCHANT_ARRAY = [NONE, PROTECTION, PROJECTILE_PROTECTION, BLAST_PROTECTION, \r\n    FIRE_PROTECTION, FEATHER_FALLING, SHARPNESS];","import * as d from './damageTypes';\r\nimport * as e from './enchants';\r\nimport { Enchantment, getEnchantment, hasEnchantment } from \"./enchants\";\r\nimport { Item } from \"./item\";\r\n\r\nexport const LEATHER = 'Leather';\r\nexport const CHAINMAIL = 'Chainmail';\r\nexport const IRON = 'Iron';\r\nexport const DIAMOND = 'Diamond';\r\nexport const GOLDEN = 'Gold';\r\nexport const NETHERITE = 'Netherite';\r\nexport const TURTLE = 'Turtle';\r\nexport const NONE = 'Unequipped';\r\nexport const ELYTRA = 'Elytra';\r\n\r\nexport const HELMET = 'Helmet';\r\nexport const CHESTPLATE = 'Chestplate';\r\nexport const LEGGINGS = 'Leggings';\r\nexport const BOOTS = 'Boots';\r\nexport const MATERIAL_ARRAY = \r\n    [\r\n    [NETHERITE, DIAMOND, IRON, CHAINMAIL, GOLDEN, LEATHER, TURTLE, NONE],\r\n    [NETHERITE, DIAMOND, IRON, CHAINMAIL, GOLDEN, LEATHER, ELYTRA, NONE],\r\n    [NETHERITE, DIAMOND, IRON, CHAINMAIL, GOLDEN, LEATHER, NONE],\r\n    [NETHERITE, DIAMOND, IRON, CHAINMAIL, GOLDEN, LEATHER, NONE]\r\n];\r\nexport const PIECE_ARRAY =\r\n    [\r\n        HELMET, CHESTPLATE, LEGGINGS, BOOTS\r\n    ];\r\nexport const armor_data = new Map([\r\n    [LEATHER, [1,3,2,1]],\r\n    [CHAINMAIL, [2,5,4,1]],\r\n    [IRON, [2,6,5,2]],\r\n    [DIAMOND, [3,8,6,3]],\r\n    [GOLDEN, [2,5,3,1]],\r\n    [NETHERITE, [3,8,6,3]],\r\n    [TURTLE, [2]],\r\n    [ELYTRA, [0,0,0,0]],\r\n    [NONE, [0,0,0,0]]\r\n]);\r\nexport interface Armor extends Item{\r\n    armor: number,\r\n    toughness: number,\r\n    type: string,\r\n    piece: string,\r\n    valid: Enchantment[]\r\n}\r\nexport function make(type : string, piece : string, enchants: Enchantment[]) : Armor {\r\n    let temp: Armor = {\r\n        name: \"\",\r\n        enchantments: enchants,\r\n        armor: 0,\r\n        toughness: 0,\r\n        type: type,\r\n        piece: piece,\r\n        valid: getValid(piece)\r\n    }\r\n    setType(temp, type);\r\n    return temp;\r\n}\r\nexport function getValid(piece : string) {\r\n    let valids : Enchantment[] = [];\r\n    if (piece === BOOTS) {\r\n        valids.push(e.copy(e.FEATHER_FALLING));\r\n    }\r\n    valids.push(e.copy(e.PROJECTILE_PROTECTION));\r\n    valids.push(e.copy(e.PROTECTION));\r\n    valids.push(e.copy(e.BLAST_PROTECTION));\r\n    valids.push(e.copy(e.FIRE_PROTECTION));\r\n    return valids;\r\n}\r\nexport function getLeft(piece: string, alreadyApplied: Enchantment[] ) {\r\n    let left : string[] = [e.NONE.key];\r\n    let applied = alreadyApplied.map((ench) => ench.key);\r\n    for (let str of getValid(piece).map((ench) => ench.key)) {\r\n        if (!applied.includes(str)) {\r\n            left.push(str);\r\n        }\r\n    }\r\n    return left;\r\n}\r\nexport function preset(a: Armor, type: string, piece: string) {\r\n    a.name = type + \" \" + piece;\r\n    let tough = getTough(type);\r\n    \r\n    if (piece === HELMET) {\r\n        a.armor = armor_data.get(type)![0];\r\n    }\r\n    if (piece === CHESTPLATE) {\r\n        a.armor = armor_data.get(type)![1];\r\n    }\r\n    if (piece === LEGGINGS) {\r\n        a.armor = armor_data.get(type)![2];\r\n    }\r\n    if (piece === BOOTS) {\r\n        a.armor = armor_data.get(type)![3];\r\n    }\r\n    a.toughness = tough;\r\n}\r\nexport function setType(a: Armor, type: string) {\r\n    a.type = type;\r\n    preset(a, type, a.piece);\r\n}\r\nexport function getTough(type: string) {\r\n    if (type === DIAMOND) {\r\n        return 2;\r\n    }\r\n    if (type === NETHERITE) {\r\n        return 3;\r\n    }\r\n    return 0;\r\n}\r\n\r\nexport function getEPF(a : Armor, type : string) : number {\r\n    let val = 0;\r\n    if (hasEnchantment(a.enchantments,e.FIRE_PROTECTION.key) &&\r\n        type.includes(d.FIRE)) {\r\n        val += 2 * getEnchantment(a.enchantments, e.FIRE_PROTECTION.key)!;\r\n    } \r\n    if (hasEnchantment(a.enchantments, e.BLAST_PROTECTION.key) &&\r\n        type.includes(d.EXPLOSION)) {\r\n        val += 2 * getEnchantment(a.enchantments, e.BLAST_PROTECTION.key)!;\r\n    } \r\n    if (hasEnchantment(a.enchantments, e.PROJECTILE_PROTECTION.key) &&\r\n        type.includes(d.PROJECTILE)) {\r\n        val += 2 * getEnchantment(a.enchantments, e.PROJECTILE_PROTECTION.key)!;\r\n    }\r\n    if (hasEnchantment(a.enchantments, e.PROTECTION.key)) {\r\n        val += getEnchantment(a.enchantments, e.PROTECTION.key)!;\r\n    }\r\n    if (hasEnchantment(a.enchantments, e.FEATHER_FALLING.key) &&\r\n            type.includes(d.FALL)) {\r\n        val += 3 * getEnchantment(a.enchantments, e.FEATHER_FALLING.key)!;\r\n    }\r\n    //console.log(\"EPF: \" + val);\r\n    return val;\r\n}\r\n\r\nexport function getSetEPF(set : Armor[], type : string) : number {\r\n    let epf = 0;\r\n    set.forEach( (item) => {\r\n        epf += getEPF(item, type);\r\n    })\r\n    return Math.min(epf, 20);\r\n}\r\nexport function getSetArmor(set : Armor[]) : number {\r\n    let total = 0;\r\n    set.forEach( (item) => {\r\n        total += item.armor;\r\n    });\r\n    return total;\r\n}\r\nexport function getSetToughness(set : Armor[]) : number {\r\n    let total = 0;\r\n    set.forEach( (item) => {\r\n        total += item.toughness;\r\n    });\r\n    return total;\r\n}\r\nexport function invalidEnchants(piece: Armor) : boolean {\r\n    let limit = 2;\r\n    if (hasEnchantment(piece.enchantments, e.FEATHER_FALLING.key)) {\r\n        limit += 1;\r\n    }\r\n    return piece.enchantments.length >= limit;\r\n}","\r\nimport * as d from './damageTypes';\r\n\r\nexport interface Damage {\r\n    amount: number,\r\n    type: string,\r\n    ticks: number\r\n}\r\nexport interface DamageItem {\r\n    dmg: Damage,\r\n    id: number,\r\n    visible: boolean,\r\n    times: number\r\n}\r\nexport function find(items: DamageItem[], id: number) {\r\n    for (let i = 0 ; i < items.length ; i++) {\r\n        if (items[i].id === id) {\r\n            return items[i];\r\n        }\r\n    }\r\n    return items[0];\r\n}\r\nexport function equals(dmg1: Damage, dmg2: Damage) {\r\n    if (dmg1.amount === dmg2.amount &&\r\n        dmg1.ticks === dmg2.ticks &&\r\n        dmg1.type === dmg2.type) {\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nexport function defaultDamage() {\r\n    return {amount: 7, type: d.MELEE, ticks: 10}\r\n}\r\nexport function copy(dmg: Damage) {\r\n    return {amount: dmg.amount, ticks: dmg.ticks, type: dmg.type}\r\n}","\r\nimport { Entry, set, get, getValue, remove, exclusion } from \"../utility/map\";\r\nimport { NONE } from \"./enchants\";\r\n\r\n\r\nexport const RESISTANCE = {key: 'resistance', value: 4};\r\nexport const HEALTH_BOOST = {key: 'health boost', value: 4};\r\nexport const ABSORPTION = {key: 'absorption', value: 4};\r\nexport const STRENGTH = {key: 'strength', value: 2};\r\nexport const WEAKNESS = {key: 'weakness', value: 1};\r\n\r\nexport const EFFECTS = [RESISTANCE, HEALTH_BOOST, ABSORPTION, STRENGTH, WEAKNESS, NONE];\r\nexport const ENTITY_EFFECTS = [RESISTANCE, HEALTH_BOOST, ABSORPTION, NONE];\r\n\r\nexport const WEAPON_EFFECTS = [STRENGTH, WEAKNESS, NONE];\r\n\r\nexport interface Effect extends Entry<string, number> {\r\n    \r\n}\r\nexport function makeEffect(type: string, level: number) {\r\n    return {key: type, value: level};\r\n}\r\nexport function setEffect(e: Effect[], type: string, value: number) {\r\n    return set(e, type, value);\r\n}\r\nexport function getEffect(e: Effect[], type: string ) {\r\n    return get(e, type);\r\n}\r\nexport function getEffectLevel(e: Effect[], type: string) {\r\n    return getValue(e, type, 0);\r\n}\r\nexport function removeEffect(e: Effect[], type: string) {\r\n    remove(e, type);\r\n}\r\nexport function excludeEffect(e: Effect[], other: Effect[]) {\r\n    return exclusion(e, other);\r\n}","import { Armor, BOOTS, CHESTPLATE, HELMET, LEGGINGS, make, NONE } from \"./armor\";\r\nimport { ABSORPTION, Effect, getEffect, getEffectLevel, HEALTH_BOOST, RESISTANCE } from \"./effects\";\r\nconst nomar = require('nomar');\r\nexport const MAX_SETUPS = 8;\r\n\r\nexport interface Entity {\r\n    armor: Armor[],\r\n    effects: Effect[],\r\n    family: string\r\n}\r\nexport function getHelmet(e : Entity) : Armor {\r\n    return e.armor[0];\r\n}\r\nexport function getChestplate(e : Entity) : Armor {\r\n    return e.armor[1];\r\n}\r\nexport function getLeggings(e : Entity) : Armor {\r\n    return e.armor[2];\r\n}\r\nexport function getBoots(e : Entity) : Armor {\r\n    return e.armor[3];\r\n}\r\nexport function maxHealth(e: Entity) {\r\n    return 20 + (getEffectLevel(e.effects, HEALTH_BOOST.key) * 4) +\r\n        (getEffectLevel(e.effects, ABSORPTION.key) * 4);\r\n}\r\nexport function summary(e : Entity) {\r\n    let str = \"\";\r\n    str += e.armor[0].type.charAt(0) + \"/\" + e.armor[1].type.charAt(0) +  \"/\" + \r\n    e.armor[2].type.charAt(0) + \"/\" + e.armor[3].type.charAt(0);\r\n    //str += \" A: \" + getSetArmor(e.armor);\r\n    //str += \" T: \" + getSetToughness(e.armor);\r\n    if (getEffect(e.effects, RESISTANCE.key)) {\r\n        str += \" R: \" + nomar(getEffect(e.effects, RESISTANCE.key)!.value);\r\n    }\r\n    //str += \" HP: \" + maxHealth(e);\r\n    return str;\r\n}\r\nexport function removeSetup(setups : Entity[], i : number) {\r\n    setups.splice(i, 1);\r\n}\r\nexport function getDefaultSetup() {\r\n    return {\r\n        armor: [make(NONE, HELMET, []),make(NONE, CHESTPLATE, []),\r\n                make(NONE, LEGGINGS, []),make(NONE, BOOTS, [])],\r\n        effects: [],\r\n        family: \"player\"\r\n    };\r\n}\r\nexport function maxSetups(setups : Entity[]) : boolean {\r\n    return setups.length >= MAX_SETUPS;\r\n}","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { RootState } from \"../app/store\";\r\nimport * as a from \"./calculations/armor\";\r\nimport { Damage, DamageItem, find } from \"./calculations/damage\";\r\nimport * as d from \"./calculations/damageTypes\";\r\nimport * as f from \"./calculations/effects\";\r\nimport * as e from \"./calculations/enchants\";\r\nimport { Entity, removeSetup as removeEntity } from \"./calculations/entity\";\r\n\r\nexport interface matchState {\r\n    setups: Entity[],\r\n    damage: Damage,\r\n    id: number,\r\n    damages: DamageItem[]\r\n}\r\nconst initialState : matchState = {\r\n    setups: [\r\n        {\r\n        armor: [\r\n            a.make(a.NETHERITE, a.HELMET, [e.copy(e.PROTECTION)]),\r\n            a.make(a.NETHERITE, a.CHESTPLATE, [e.copy(e.PROTECTION)]),\r\n            a.make(a.NETHERITE, a.LEGGINGS, [e.copy(e.PROTECTION)]),\r\n            a.make(a.NETHERITE, a.BOOTS, [e.copy(e.PROTECTION), e.copy(e.FEATHER_FALLING)])\r\n          ], \r\n        effects: [], \r\n        family: 'player' \r\n        },\r\n    ],\r\n    damage: {\r\n        amount: 7,\r\n        type: d.MELEE,\r\n        ticks: 10\r\n    },\r\n    damages: [\r\n    ],\r\n    id: 99\r\n}\r\nexport const activeSlice = createSlice( {\r\n    name: 'active',\r\n    initialState,\r\n    reducers: {\r\n        setType: (state, action: PayloadAction<{entity: number, type: string, slot: number}>) => {\r\n            let p = action.payload;\r\n            a.setType(state.setups[p.entity].armor[p.slot], p.type);\r\n            //console.log(\"Type has been set: \" + p.type);\r\n            //console.log(p.slot);\r\n            //console.log(state.setups[p.entity].armor[p.slot].armor);\r\n            //console.log(state.setups[p.entity].armor[p.slot].toughness);\r\n        },\r\n        setEnchant: (state, action: PayloadAction<{entity: number, name: string, level: number, slot: number}>) => {\r\n            let p = action.payload;\r\n            if (p.name === e.NONE.key) return;\r\n            e.setEnchantment(state.setups[p.entity].armor[p.slot].enchantments, \r\n                p.name, \r\n                p.level);\r\n        },\r\n        removeEnchant: (state, action: PayloadAction<{entity: number, name: string, slot: number}>) => {\r\n            let p = action.payload;\r\n            e.removeEnchant(state.setups[p.entity].armor[p.slot].enchantments, \r\n                p.name);\r\n        },\r\n        removeEffect: (state, action: PayloadAction<{entity: number, name: string}>) => {\r\n            let p = action.payload;\r\n            f.removeEffect(state.setups[p.entity].effects, p.name);\r\n        },\r\n        setEffect: (state, action: PayloadAction<{entity: number, name: string, level: number}>) => {\r\n            let p = action.payload;\r\n            f.setEffect(state.setups[p.entity].effects, p.name, p.level);\r\n        },  \r\n        setDamageType: (state, action: PayloadAction<string>) => {\r\n            if (d.baseDamageType(action.payload) !== d.MELEE) {\r\n                state.damage.ticks = 10;\r\n            }\r\n            state.damage.type = action.payload;\r\n        },\r\n        setDamage: (state, action: PayloadAction<number>) => {\r\n            state.damage.amount = action.payload;\r\n        },\r\n        setDamageTicks: (state, action: PayloadAction<number>) => {\r\n            state.damage.ticks = action.payload;\r\n        },\r\n        toggleDamage: (state, action: PayloadAction<number>) => {\r\n            find(state.damages, action.payload).visible = !find(state.damages, action.payload).visible;\r\n        },\r\n        addDamageTimes: (state, action: PayloadAction<{id: number, change: number}>) => {\r\n            let p = action.payload;\r\n            find(state.damages, p.id).times += p.change;\r\n            if (find(state.damages, p.id).times < 0) {\r\n                find(state.damages, p.id).times = 0;\r\n            }\r\n        },\r\n        removeSetup: (state, action: PayloadAction<number>) => {\r\n            removeEntity(state.setups, action.payload);\r\n        },\r\n        addSetup: (state, action: PayloadAction<Entity>) => {\r\n            state.setups.push(action.payload);\r\n        },\r\n        saveDamage: (state, action: PayloadAction<Damage>) => {\r\n            state.id = state.id + 1;\r\n            state.damages.push({dmg:action.payload, id:state.id+1, visible: true, times: 1});\r\n        },\r\n        //number is ID value!\r\n        removeDamage: (state, action: PayloadAction<number>) => {\r\n            for (let i = 0 ; i < state.damages.length ; i++) {\r\n                if (state.damages[i].id === action.payload) {\r\n                    state.damages.splice(i, 1);\r\n                }\r\n            }\r\n        },\r\n        moveDamage: (state, action: PayloadAction<{from: number, to: number}>) => {\r\n            let p = action.payload;\r\n            const moved = state.damages[p.from];\r\n            state.damages.splice(p.from, 1);\r\n            state.damages.splice(p.to, 0, moved);\r\n        }\r\n    }\r\n});\r\n\r\nexport const {setType, setEnchant, removeEnchant, removeEffect, setEffect, setDamageType, setDamage,\r\n    setDamageTicks, toggleDamage, addDamageTimes, removeSetup, addSetup, saveDamage, removeDamage, moveDamage} = activeSlice.actions;\r\n// The function below is called a selector and allows us to select a value from\r\n// the state. Selectors can also be defined inline where they're used instead of\r\n// in the slice file. For example: `useSelector((state: RootState) => state.counter.value)`\r\nexport const selectEntity = (state: RootState) => state.active.setups;\r\nexport const selectDamage = (state: RootState) => state.active.damage;\r\nexport const selectDamages = (state: RootState) => state.active.damages;\r\n\r\nexport default activeSlice.reducer;","import React, { useState } from \"react\";\r\nimport { Button, Modal } from \"react-bootstrap\";\r\nimport { Placement } from \"react-bootstrap/esm/Overlay\";\r\nimport { Tooltip } from \"reactstrap\";\r\n\r\nexport default function Icon(props : {val: string}) {\r\n    return (\r\n        <i className=\"material-icons vc\">{props.val}</i>\r\n    );\r\n}\r\n\r\ninterface InputModalType {\r\n  prompt: string,\r\n  onSubmit: (val : string) => void\r\n}\r\ninterface InputModalState {\r\n  show: boolean,\r\n  input: string\r\n}\r\n//Use this later\r\n//<InputModal prompt=\"Type something\" onSubmit={ (val) => alert(val)} />\r\nexport class InputModal extends React.Component<InputModalType, InputModalState> {\r\n  constructor(props: InputModalType) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      show: true,\r\n      input: \"\"\r\n    }\r\n\r\n    this.hide = this.hide.bind(this);\r\n  }\r\n  hide() {\r\n    this.setState({show: false, input: \"\"})\r\n  }\r\n  render() { return (\r\n    <Modal\r\n      onHide={() => this.hide()}\r\n      show={this.state.show}\r\n      size=\"lg\"\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          {this.props.prompt}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <input className=\"form-control dark-input\" type=\"text\" \r\n        onChange={ (e) => this.setState({input: e.target.value})} />\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button onClick={(e) => {\r\n            this.props.onSubmit(this.state.input);\r\n            this.hide();\r\n          }}>Submit</Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n  }\r\n}\r\n\r\nexport function Tip(props : {target: string, val: string, pos: Placement}) {\r\n  const [tooltipOpen, setTooltipOpen] = useState(false);\r\n\r\n  const toggle = () => setTooltipOpen(!tooltipOpen);\r\n\r\n  return (\r\n    <Tooltip placement={props.pos} isOpen={tooltipOpen} target={props.target} toggle={toggle}>\r\n      {props.val}\r\n    </Tooltip>\r\n  );\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJBAMAAAASvxsjAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEUAAAAAAADm5/K4ucRpanD////Im/ZLAAAAAXRSTlMAQObYZgAAAAFiS0dEBfhv6ccAAAAHdElNRQfkCBoIIjG2qhisAAAAAW9yTlQBz6J3mgAAADFJREFUCNdjYBRgEGRgEDJkVBZgEDYWNhZgEDE2NhFgYDQ2NmRAJV1cHBkYGAQFBRgAeXMEuO3JobYAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDgtMjZUMDg6MzQ6NDkrMDA6MDBZSNxrAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA4LTI2VDA4OjM0OjQ5KzAwOjAwKBVk1wAAACB0RVh0c29mdHdhcmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAFnRFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAA5Gf/zMgAAABV0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAA51JEX7wAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTk4NDMwODg5dAVNOAAAAA50RVh0VGh1bWI6OlNpemUAMELJbxjtAAAANnRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vdG1wL3RodW1ibHIvaW1nMTE1MjE2MDI4MjAzODk0Mzg1NzUxyd+sAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJBAMAAAASvxsjAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEUAAAAAAAC4ucTm5/I9PT1panD///8m4Em2AAAAAXRSTlMAQObYZgAAAAFiS0dEBmFmuH0AAAAHdElNRQflAhEOKDf3RmWkAAAAKklEQVQI12NgFGAQZGAQMmR0EWAQUhIBkqJgklFJxJEBlQwFkQyCggIMAHGUBDt7xIrLAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTAyLTE3VDE0OjQwOjU1KzAwOjAw4ujuVAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMS0wMi0xN1QxNDo0MDo1NSswMDowMJO1VugAAAAgdEVYdHNvZnR3YXJlAGh0dHBzOi8vaW1hZ2VtYWdpY2sub3JnvM8dnQAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7LwAAABZ0RVh0VGh1bWI6OkltYWdlOjpIZWlnaHQAORn/8zIAAAAVdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAOdSRF+8AAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTYxMzU3Mjg1NbSnsToAAAAQdEVYdFRodW1iOjpTaXplADEyM0I5kYTeAAAANnRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vdG1wL3RodW1ibHIvaW1nMTI5MzgxMTEyNzA2NDk1NDA2MDUY6HzXAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAQAAABKmM6bAAAABGdBTUEAALGPC/xhBQAAAAJiS0dEAP+Hj8y/AAAAB3RJTUUH5AgaCCIwwa0oOgAAAAFvck5UAc+id5oAAAA1SURBVAjXnc6xEQAxDALBlfty9S6MD+RAM86eCA4CIKIVoWTjDLe63hpAGaHXy6PfqO6fkT9X9wyCI2eOKwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wOC0yNlQwODozNDo0OCswMDowMP8/198AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDgtMjZUMDg6MzQ6NDgrMDA6MDCOYm9jAAAAIHRFWHRzb2Z0d2FyZQBodHRwczovL2ltYWdlbWFnaWNrLm9yZ7zPHZ0AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAWdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADkZ//MyAAAAFXRFWHRUaHVtYjo6SW1hZ2U6OldpZHRoADnUkRfvAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE1OTg0MzA4ODgDAn2uAAAADnRFWHRUaHVtYjo6U2l6ZQAwQslvGO0AAAA2dEVYdFRodW1iOjpVUkkAZmlsZTovLy90bXAvdGh1bWJsci9pbWcxNjMzNzU5MDY1NDk2NzkzMTM4MSJfF5EAAAAASUVORK5CYII=\"","import React, { useState } from \"react\";\r\nimport { Button, Collapse, Dropdown, DropdownButton, Image } from \"react-bootstrap\";\r\nimport { setDamage, setDamageTicks, setDamageType } from \"../activeSlice\";\r\nimport { Damage } from \"../calculations/damage\";\r\nimport full_armor from '../images/full_armor.png';\r\nimport full_heart from '../images/full_heart.png';\r\nimport half_armor from '../images/half_armor.png';\r\nimport half_heart from '../images/half_heart.png';\r\nimport half_heart_lg from '../images/half_heart_lg.png';\r\nimport no_armor from '../images/no_armor.png';\r\nimport Icon from \"./Icons\";\r\n\r\n\r\n\r\n\r\n\r\nexport function sync(dispatch: any, dmg: Damage, setter?: (d: Damage) => void) {\r\n    if (setter) {\r\n        setter(dmg);\r\n    }\r\n    dispatch(setDamageTicks(dmg.ticks));\r\n    dispatch(setDamage(dmg.amount));\r\n    dispatch(setDamageType(dmg.type));\r\n    \r\n}\r\n\r\nexport interface DropInputType {\r\n    selected: string,\r\n    inputs: string[],\r\n    className?: string,\r\n    onDropClicked: (item : string) => void\r\n}\r\nexport function DropInput(props: DropInputType) {\r\n\r\n    return (\r\n        <DropdownButton className={props.className} title={props.selected}>\r\n        {\r\n            props.inputs.map( (item) => \r\n                <Dropdown.Item onClick={(e : any) => {\r\n                    props.onDropClicked(e.target.text);\r\n                }}>\r\n                    {item}\r\n                </Dropdown.Item>\r\n            )\r\n        }\r\n        </DropdownButton>\r\n    );\r\n}\r\n\r\nexport interface CollapseableType {\r\n    handleCollapse?: (open?: boolean) => void,\r\n    inner?: React.ReactNode,\r\n    title?: React.ReactNode,\r\n    options?: React.ReactNode,\r\n    className?: string,\r\n    defaultOpen?: boolean,\r\n    override?: string\r\n}\r\n\r\nexport function Collapseable(props: CollapseableType) {\r\n    let [toggle, setToggle] = useState(props.defaultOpen || false);\r\n    const {inner} = props;\r\n    const isOpen = () => {\r\n        return props.override ? \r\n                        props.override === \"open\" ? true : false\r\n                    : toggle\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <Button \r\n                className={\"collapse-btn text-left \" + (props.className||\"\")} \r\n                onClick={ () => {\r\n                    let newState = !isOpen();\r\n                    setToggle(newState); \r\n                    if (props.handleCollapse) {\r\n                        props.handleCollapse(newState);\r\n                    }\r\n                } }\r\n                \r\n            >\r\n            {\r\n                isOpen() ? \r\n                <Icon val=\"expand_more\"/> :\r\n                <Icon val=\"chevron_right\"/>\r\n            }\r\n            {\r\n                props.title ?\r\n                props.title : \"\"\r\n            }\r\n            </Button>\r\n            {\r\n                props.options ? props.options : \"\"\r\n            }\r\n            <Collapse in={\r\n                    isOpen()\r\n                }>\r\n                <div>{inner!}</div>\r\n            </Collapse>\r\n        </React.Fragment>\r\n    );\r\n}\r\nexport function HalfHeart() {\r\n    return (\r\n        <Image className=\"m-1\" src={half_heart_lg} width={18} height={18}></Image>\r\n    );\r\n}\r\nexport function HealthBar(props: {health: number}) {\r\n    return <DynamicBar \r\n        value={props.health + .49999999}\r\n        full={full_heart}\r\n        half={half_heart}\r\n    />\r\n}\r\nexport function ArmorBar(props: {armor: number}) {\r\n    return <DynamicBar \r\n        value={props.armor}\r\n        max={20}\r\n        full={full_armor}\r\n        half={half_armor}\r\n        empty={no_armor}\r\n    />\r\n}\r\nexport function ToughnessBar(props: {toughness: number}) {\r\n    return <DynamicBar \r\n        value={props.toughness}\r\n        max={12}\r\n        full={full_armor}\r\n        half={half_armor}\r\n        empty={no_armor}\r\n    />\r\n}\r\ninterface DynamicBarType {\r\n    value: number,\r\n    max?: number,\r\n    full: string,\r\n    half: string,\r\n    empty?: string\r\n}\r\nexport function DynamicBar(props: DynamicBarType) {\r\n    let val = Math.round(props.value);\r\n    let full = Math.floor(val / 2);\r\n    let half = val % 2 === 1;\r\n    let elements = [];\r\n    for (let i = 0 ; i < full ; i++) {\r\n        elements.push(\r\n            <Image src={props.full} />\r\n        )\r\n    }\r\n    if (half) {\r\n        elements.push(\r\n            <Image src={props.half} />\r\n        )\r\n    }\r\n    if (props.max && props.empty) {\r\n        let left = Math.floor((props.max - val)/2);\r\n        for (let i = 0 ; i < left ; i++) {\r\n            elements.push(\r\n                <Image src={props.empty} />\r\n            );\r\n        }\r\n    }\r\n    return <span>{elements}</span>;\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAAj0lEQVQ4y7WU2wmAMAxFj+IG4g51D/1yXr90kC7hDPXDKib1BaYXSklIL4cmbUGqoOLiJQ9AiZHOrgEg1LUsWBYAnHMi770XHqZEkmQct30YRGHbNJcGO5kZUZVkFMlXmREdRnNcv43+KpmjKXavU4W6a1nnSOuSbCfSJFnv6JGsj2/u7owZ0RcF0r8oH9EKrOAiKkZtnusAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJBAMAAAASvxsjAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEUAAAAAAAD/ExP/yMi7ExP///8nHqFEAAAAAXRSTlMAQObYZgAAAAFiS0dEBfhv6ccAAAAHdElNRQfkCBcNARsnGbwtAAAAAW9yTlQBz6J3mgAAADRJREFUCNcVykENADAIxdDigBEM7AcFc7D5FzW4NO9QWOZgig1xJCc0Takce7pANnsaQvMDYhADZZWgYTQAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDgtMjNUMTM6MDE6MjcrMDA6MDCwTIA3AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA4LTIzVDEzOjAxOjI3KzAwOjAwwRE4iwAAACB0RVh0c29mdHdhcmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAFnRFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAA5Gf/zMgAAABV0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAA51JEX7wAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTk4MTg3Njg3I+nVLgAAAA50RVh0VGh1bWI6OlNpemUAMELJbxjtAAAANXRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vdG1wL3RodW1ibHIvaW1nMTk4MzU0NjAyMjIyNjk1MzUxOLXXJgkAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJBAMAAAASvxsjAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEUAAAAAAAD/ExMoKCj/yMi7ExP///9pBeufAAAAAXRSTlMAQObYZgAAAAFiS0dEBmFmuH0AAAAHdElNRQfkCBcNARpQHoy7AAAAAW9yTlQBz6J3mgAAADJJREFUCNdjYBBkFGBgYFQSNmRgEHJSNhZgEFICkaJgkjFIGSjOIKoMVMPAGMgAAkAmAG7vA8ywhWudAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTA4LTIzVDEzOjAxOjI2KzAwOjAwFjuLgwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wOC0yM1QxMzowMToyNiswMDowMGdmMz8AAAAgdEVYdHNvZnR3YXJlAGh0dHBzOi8vaW1hZ2VtYWdpY2sub3JnvM8dnQAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7LwAAABZ0RVh0VGh1bWI6OkltYWdlOjpIZWlnaHQAORn/8zIAAAAVdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAOdSRF+8AAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTU5ODE4NzY4NlTu5bgAAAAOdEVYdFRodW1iOjpTaXplADBCyW8Y7QAAADZ0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL3RtcC90aHVtYmxyL2ltZzE3MjU4MzkwMDM2MTI0NDY5OTUwYjhTRQAAAABJRU5ErkJggg==\"","import functionPlot from \"function-plot\";\r\nimport { Armor, getSetArmor, getSetEPF, getSetToughness } from \"../calculations/armor\";\r\nimport { Damage } from \"../calculations/damage\";\r\nimport * as d from \"../calculations/damageTypes\";\r\nimport * as e from \"../calculations/effects\";\r\nimport { getEffectLevel } from \"../calculations/effects\";\r\nimport { Entity } from \"../calculations/entity\";\r\n\r\nexport function bound(value : number, min : number, max: number) {\r\n    if (value < min) {\r\n        return min;\r\n    }\r\n    if (value > max) {\r\n        return max;\r\n    }\r\n    return value;\r\n}\r\nexport function armorFactor(dmg: number, type: string, set: Armor[]) {\r\n    if (!affectedByArmor(type)) {\r\n        return 1;\r\n    }\r\n    let def = getSetArmor(set);\r\n    let tough = getSetToughness(set);\r\n    return (1 - Math.min(20, Math.max( def/5, def - (4*dmg / (tough+8)) ))/25);\r\n}\r\nexport function EPFFactor(type: string, set: Armor[]) {\r\n    let epf = getSetEPF(set, type);\r\n    return (1 - Math.min(epf, 20) / 25);\r\n}\r\nexport function resistanceFactor(level: number) {\r\n    return (1 - Math.min(level, 5)/5);\r\n}\r\n\r\nexport function affectedByArmor(type : string) {\r\n    if (type === d.MAGIC ||\r\n        type === d.FALL ||\r\n        type === d.FIRE) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * \r\n * @param dmg \r\n * @param target \r\n * @returns Damage taken after all effects, armor, enchants, etc. applied\r\n */\r\nexport function takeDamage(dmg : Damage, target : Entity, legacy? : boolean) {\r\n    /*\r\n    let atk = dmg.amount;\r\n    let type = dmg.type;\r\n    //console.log(\"Damage type: \" + type);\r\n    //console.log(\"Raw damage: \" + atk);\r\n    //ATK IS AT THE FRONT!\r\n    let afterArmor = atk * armorFactor(atk, type, target.armor);\r\n    //console.log(\"After armor: \" + afterArmor);\r\n    let afterEPF = afterArmor * EPFFactor(type, target.armor);\r\n    //console.log(\"After EPF: \" + afterEPF);\r\n    let afterResistance = afterEPF * resistanceFactor(getEffectLevel(target.effects, e.RESISTANCE) || 0);\r\n    */\r\n    return functionPlot.$eval.builtIn(\r\n        {fn: damageEquation(dmg, target, legacy)}, 'fn', {x:dmg.amount});\r\n    \r\n    //return afterResistance;\r\n}\r\nexport function damageEquation(dmg: Damage, target : Entity, legacy? : boolean) : string {\r\n    if (legacy) {\r\n        return damageEquationLegacy(dmg, target);\r\n    }\r\n    let EPF = EPFFactor(dmg.type, target.armor);\r\n    let res = resistanceFactor(getEffectLevel(target.effects, e.RESISTANCE.key) || 0);\r\n    let def = getSetArmor(target.armor);\r\n    let tough = getSetToughness(target.armor);\r\n    if (affectedByArmor(dmg.type)) {\r\n        return \"max(0, x * (1 - min(20, max( \" + def + \"/5, \" + def + \"- (4* x / (\" + tough + \"+8)) ))/25) * \" \r\n        + EPF + \" * \" + res + \")\";\r\n    } else {\r\n        return \"max(0, x * \" + EPF + \" * \" + res + \")\";\r\n    }\r\n}\r\nfunction damageEquationLegacy(dmg: Damage, target: Entity) : string {\r\n    let EPF = EPFFactor(dmg.type, target.armor);\r\n    let res = resistanceFactor(getEffectLevel(target.effects, e.RESISTANCE.key) || 0);\r\n    let def = getSetArmor(target.armor);\r\n    if (affectedByArmor(dmg.type)) {\r\n        return \"max(0, x * (1 -  (\" + (def * 4)  + \") *\"\r\n        + EPF + \" * \" + res + \")\";\r\n    } else {\r\n        return \"max(0, x * \" + EPF + \" * \" + res + \")\";\r\n    }\r\n}\r\n","import functionPlot from \"function-plot\";\r\nimport { bound } from \"./maths\";\r\n\r\nvar Color = require('color');\r\nexport function range(from: number, to: number) {\r\n    let arr : number[] = [];\r\n    for (let i = from ; i < to ; i++) {\r\n        arr.push(i);\r\n    }\r\n    return arr;\r\n}\r\nexport function round(num : number) {\r\n    return Math.round((num + Number.EPSILON) * 1000) / 1000;\r\n}\r\nexport function getColor(max: number, value: number) {\r\n    if (value <= 0) {\r\n        return Color.rgb(150,150,150);\r\n    }\r\n    return Color.hsl(180*(bound(value/max,0,1)),70,70);\r\n}\r\nexport function getDeltaColor(max: number, value: number) {\r\n    if (value > 0) {\r\n        return Color.rgb(255 - (-value/max*255), 255, 255 - (-value/max*255));\r\n    } else {\r\n        return Color.rgb(255, 255 - (-value/max*255), 255 - (-value/max*255));\r\n    }\r\n}\r\nexport function getPresetColor(index: number) {\r\n    return functionPlot.globals.COLORS[index];\r\n}\r\nexport function elementwiseAdd(origin: number[], addThis: number[]) {\r\n    let temp = [];\r\n    for (let i = 0 ; i < addThis.length ; i++) {\r\n        temp.push(origin[i] + addThis[i]);\r\n    }\r\n    return temp;\r\n}","import { Button, ButtonGroup, Col, Row } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { saveDamage, selectDamage, setDamage, setDamageTicks, setDamageType } from \"../activeSlice\";\r\nimport { Damage, equals } from \"../calculations/damage\";\r\nimport Icon from \"../utility/Icons\";\r\nimport { HalfHeart } from \"../utility/Parts\";\r\nimport { round } from \"../utility/Utils\";\r\n\r\ninterface SyncSaveType {\r\n    dmg: Damage,\r\n    label?: string\r\n}\r\nexport function SyncSave(props: SyncSaveType) {\r\n    const dispatch = useDispatch();\r\n    const stagedDamage = useSelector(selectDamage);\r\n    const stageDamage = () => {\r\n        dispatch(setDamageType(props.dmg.type));\r\n        dispatch(setDamage(props.dmg.amount));\r\n        dispatch(setDamageTicks(props.dmg.ticks));\r\n    }\r\n    const save = () => {\r\n        stageDamage();\r\n        dispatch(saveDamage(props.dmg));\r\n    }\r\n    return (\r\n        <>\r\n        <HalfHeart />\r\n                {/*\r\n                    disabled={equals(stagedDamage, props.dmg)}\r\n                    You cannot have props.dmg because props.dmg is an object!\r\n                    Apply align-middle to the element you want to align, not the container.\r\n                */}\r\n        <span className={\"align-middle\"}>{round(props.dmg.amount)}</span>\r\n        <ButtonGroup>\r\n            <Button \r\n            className={\"align-middle\"}\r\n            disabled={equals(stagedDamage, props.dmg)}\r\n            onClick={ () => {\r\n                stageDamage();\r\n            }}>\r\n                <Icon val=\"sync\"/>\r\n            </Button>\r\n            <Button \r\n            className={\"pl-0\"}\r\n            onClick={ () => {\r\n                stageDamage();\r\n                save();\r\n            }}>\r\n                <Icon val=\"add\" />\r\n                <span className={\"align-middle\"}>Add to Simulator</span>\r\n            </Button>\r\n        </ButtonGroup>\r\n        </>\r\n    );\r\n}\r\nexport function SyncSaveRow(props: SyncSaveType) {\r\n    return (\r\n        <Row>\r\n            <Col md={6} lg={8}>\r\n            </Col>\r\n            <SyncSaveColumn dmg={props.dmg} label={props.label} />\r\n        </Row>\r\n    );\r\n}\r\nexport function SyncSaveColumn(props: SyncSaveType) {\r\n    return (\r\n        <Col md={6} lg={4} className=\"text-right\">\r\n                <span className=\"align-middle\">{props.label}</span>\r\n                <SyncSave dmg={props.dmg}/>\r\n        </Col>\r\n    );\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { Button, ButtonGroup } from \"react-bootstrap\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/hooks\";\r\nimport { removeEnchant, selectEntity, setEnchant } from \"../activeSlice\";\r\nimport { getLeft, PIECE_ARRAY } from \"../calculations/armor\";\r\nimport { ENCHANT_ARRAY, getEnchantment, NONE } from \"../calculations/enchants\";\r\nimport { Entity } from \"../calculations/entity\";\r\nimport Icon from \"../utility/Icons\";\r\nimport { DropInput } from \"../utility/Parts\";\r\nimport { range } from \"../utility/Utils\";\r\nconst nomar = require('nomar');\r\n\r\ninterface EnchantContainerType {\r\n    entity: number,\r\n    slot: number\r\n}\r\nexport function EnchantContainer(props : EnchantContainerType) {\r\n    const entity : Entity = useAppSelector(selectEntity)[props.entity];\r\n    const dispatch = useAppDispatch();\r\n    return (\r\n        <div>\r\n            {\r\n                entity.armor[props.slot].enchantments.map( (item) => \r\n                    (<ItemBadge \r\n                        //entity={props.entity} slot={props.slot} enchant={item}\r\n                        name={item.key}\r\n                        value={item.value}\r\n                        getValidValues={ () => {\r\n                            return (range(1,getEnchantment(ENCHANT_ARRAY, item.key)+1));\r\n                        }}\r\n                        onValueChange={ (val) => {\r\n                            dispatch(\r\n                            setEnchant(\r\n                            {entity: props.entity, name: item.key, level: (val), slot: props.slot}))\r\n                            \r\n                        }}\r\n                        onDelete={ () => {\r\n                            dispatch(\r\n                                removeEnchant({entity: props.entity, name:item.key, slot: props.slot})\r\n                            );\r\n                        }}\r\n                        \r\n                    />)\r\n                )\r\n            }\r\n            <Add\r\n                defaultName={NONE.key}\r\n                defaultValue={1}\r\n                validate={(name, value, setter) => {\r\n                    if (value > getEnchantment(ENCHANT_ARRAY, name)) {\r\n                        setter(getEnchantment(ENCHANT_ARRAY, name));\r\n                    }\r\n                }}\r\n                getValid={ () => {\r\n                    return getLeft(PIECE_ARRAY[props.slot], entity.armor[props.slot].enchantments);\r\n                }}\r\n                getValidValues={ (name) => {\r\n                    return range(1,getEnchantment(ENCHANT_ARRAY, name)+1);\r\n                }}\r\n                onSave={ (name, value) => {\r\n                    dispatch(setEnchant(\r\n                        {entity: props.entity, name: name, level: value, slot: props.slot}));\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\ninterface ItemBadgeType {\r\n    name: string,\r\n    value: number,\r\n    onDelete: () => void,\r\n    onValueChange: (value: number) => void,\r\n    getValidValues: () => number[]\r\n}\r\nexport function ItemBadge(props : ItemBadgeType) {\r\n    return (\r\n        <ButtonGroup>\r\n            <Button >\r\n                {props.name}\r\n            </Button>\r\n            <DropInput \r\n                selected={nomar(props.value)} \r\n                onDropClicked={(val) => {\r\n                    props.onValueChange(nomar(val));\r\n                }}\r\n                inputs={\r\n                    nomar(props.getValidValues())\r\n                    \r\n                }\r\n            />\r\n            <Button onClick={(e) => {\r\n                props.onDelete();\r\n                \r\n            }}>\r\n                {/*&#10006;*/}\r\n                <Icon val=\"close\" />\r\n            </Button>\r\n        </ButtonGroup>\r\n    );\r\n}\r\ninterface AddType {\r\n    defaultName: string,\r\n    defaultValue: number,\r\n    validate: (name: string, value: number, \r\n        setter: React.Dispatch<React.SetStateAction<number>>) => void,\r\n    \r\n    getValid: () => string[],\r\n    getValidValues: (name: string) => number[],\r\n\r\n    onSave: (name: string, value: number) => void\r\n\r\n}\r\n\r\nexport function Add(props : AddType) {\r\n    const [editing, setEditing] = useState(false);\r\n    const [name, setName] = useState(\"None\");\r\n    const [level, setLevel] = useState(1);\r\n    const focusInCurrentTarget = ({ relatedTarget, currentTarget } : any) => {\r\n        if (relatedTarget === null) return false;\r\n        \r\n        var node = relatedTarget.parentNode;\r\n              \r\n        while (node !== null) {\r\n            if (node === currentTarget) return true;\r\n            node = node.parentNode;\r\n        }\r\n        return false;\r\n    }\r\n    const reset = () => {\r\n       setName(props.defaultName);\r\n       setLevel(props.defaultValue);\r\n    }\r\n    useEffect( () => {\r\n       props.validate(name, level, setLevel);\r\n    }, [level, name, props]);\r\n    return (\r\n        (!editing ) ? \r\n            (\r\n                props.getValid().length > 1)\r\n            ? \r\n            (<Button onClick={() => {reset(); setEditing(true);} }>\r\n                <Icon val=\"add\" />\r\n            </Button>) \r\n            : (<React.Fragment></React.Fragment>)\r\n        : \r\n        (\r\n            <div onBlur={(e: React.ChangeEvent) => {\r\n                if(!focusInCurrentTarget(e)) {\r\n                    setEditing(false);\r\n                    reset();\r\n                }\r\n            }}>\r\n            <ButtonGroup className=\"editing\">\r\n                <DropInput\r\n                    selected={name} \r\n                    onDropClicked={(val) => \r\n                        setName(val)\r\n                    } \r\n                    inputs={\r\n                        props.getValid()\r\n                    }\r\n                />\r\n                <DropInput \r\n                    selected={nomar(level)} \r\n                    onDropClicked={(val) => \r\n                        setLevel(nomar(val))\r\n                    } \r\n                    inputs={\r\n                        nomar(\r\n                            props.getValidValues(name)\r\n                        )\r\n                    }\r\n                />\r\n                <Button autoFocus onClick={(e) => {\r\n                        props.onSave(name, level);\r\n                        setEditing(false);\r\n                    }}>\r\n                    <Icon val=\"done\" />\r\n                </Button>\r\n            </ButtonGroup>\r\n            </div>\r\n        )\r\n    );\r\n}","import functionPlot from \"function-plot\";\r\nimport { DIAMOND, GOLDEN, IRON, NETHERITE, NONE } from \"../calculations/armor\";\r\nimport { Effect, getEffectLevel, setEffect, STRENGTH, WEAKNESS } from \"../calculations/effects\";\r\nimport { round } from \"../utility/Utils\";\r\n\r\nconst _ = require('lodash');\r\nconst nomar = require('nomar');\r\n//cooldown T = 20 / attackSpeed\r\nexport interface Weapon {\r\n    damage: number,\r\n    attackSpeed: number,\r\n    ticksSinceLast: number,\r\n    critical: boolean,\r\n    sharpness: number,\r\n    effects: Effect[],\r\n    material: string,\r\n    type: string\r\n}\r\n\r\nexport const STONE = 'Stone';\r\nexport const WOODEN = 'Wood';\r\n\r\n\r\nexport const SWORD = 'Sword';\r\nexport const TRIDENT = 'Trident';\r\nexport const SHOVEL = 'Shovel';\r\nexport const PICKAXE = 'Pickaxe';\r\nexport const AXE = 'Axe';\r\nexport const HOE = 'Hoe';\r\nexport const FIST = 'Fist';\r\n\r\nexport const WEAPON_DATA = new Map([\r\n    [SWORD,[4,4,5,6,7,8]],\r\n    [TRIDENT,[9,9,9,9,9,9]],\r\n    [SHOVEL,[2.5,2.5,3.5,4.5,5.5,6.5]],\r\n    [PICKAXE,[2,2,3,4,5,6]],\r\n    [AXE,[7,7,9,9,9,10]],\r\n    [HOE,[1,1,1,1,1,1]],\r\n    [FIST,[1,1,1,1,1,1]]\r\n\r\n]);\r\nexport const WEAPONS = [SWORD, TRIDENT, SHOVEL, PICKAXE, AXE, HOE, FIST];\r\nexport const MATERIALS = [NETHERITE, DIAMOND, IRON, GOLDEN, STONE, WOODEN];\r\n\r\nexport const WEAPON_MATERIALS = new Map([\r\n    [SWORD, MATERIALS],\r\n    [TRIDENT, [NONE]],\r\n    [SHOVEL, MATERIALS],\r\n    [PICKAXE, MATERIALS],\r\n    [AXE, MATERIALS],\r\n    [HOE, MATERIALS],\r\n    [FIST, [NONE]]\r\n\r\n]);\r\n\r\nexport const WEAPON_SPEEDS = new Map([\r\n    [SWORD, [1.6,1.6,1.6,1.6,1.6,1.6]],\r\n    [TRIDENT, [1.1,1.1,1.1,1.1,1.1,1.1]],\r\n    [SHOVEL, [1,1,1,1,1,1]],\r\n    [PICKAXE, [1.2,1.2,1.2,1.2,1.2,1.2]],\r\n    [AXE, [.8,1,.8,.9,1,1]],\r\n    [HOE, [1,1,2,3,4,4]],\r\n    [FIST, [4,4,4,4,4,4]]\r\n\r\n]);\r\nexport function makeWeapon(type: string, material: string, ticksSinceLast: number, \r\n    critical: boolean, sharpness: number, strength: number, weakness: number) : Weapon {\r\n    let temp : Weapon = {\r\n        type: type,\r\n        material: material,\r\n        damage: 0,\r\n        attackSpeed: 1,\r\n        ticksSinceLast: ticksSinceLast,\r\n        critical: critical,\r\n        sharpness: sharpness,\r\n        effects: []\r\n    }\r\n    if (strength) {\r\n        setEffect(temp.effects, STRENGTH.key, strength);\r\n    }\r\n    if (weakness) {\r\n        setEffect(temp.effects, WEAKNESS.key, weakness);\r\n    }\r\n    preset(temp, type, material);\r\n    return temp;\r\n}\r\nexport function defaultWeapon() : Weapon{\r\n    return makeWeapon(\"Sword\", \"Netherite\", 14, true, 5, 2, 0);\r\n}\r\nexport function preset(w: Weapon, type: string, material: string) {\r\n    w.damage = weaponPreset(type, material);\r\n    w.attackSpeed = weaponSpeedPreset(type, material);\r\n    w.type = type;\r\n    w.material = material;\r\n}\r\nexport function weaponPreset(type: string, material: string) {\r\n    return indexInto(WEAPON_DATA, type, material);\r\n}\r\nexport function weaponSpeedPreset(type: string, material: string) {\r\n    return indexInto(WEAPON_SPEEDS, type, material);\r\n}\r\nexport function fullCharge(w: Weapon) {\r\n    return 20 / w.attackSpeed;\r\n}\r\nexport function fullChargeDamage(w: Weapon) {\r\n    const x: Weapon = _.cloneDeep(w);\r\n    x.ticksSinceLast = 100; //5 seconds should be long enough for any weapon to recharge\r\n    return getDamage(x);\r\n}\r\nfunction indexInto(map: Map<string, number[]>, key: string, material: string) {\r\n    if (material === WOODEN) {\r\n        return map.get(key)![0];\r\n    } else if (material === GOLDEN) {\r\n        return map.get(key)![1];\r\n    } else if (material === STONE) {\r\n        return map.get(key)![2];\r\n    } else if (material === IRON) {\r\n        return map.get(key)![3];\r\n    } else if (material === DIAMOND) {\r\n        return map.get(key)![4];\r\n    } else if (material === NETHERITE) {\r\n        return map.get(key)![5];\r\n    }\r\n    return map.get(key)![0];\r\n}\r\nexport function getEnchantModifier(w: Weapon) : number {\r\n\r\n    return functionPlot.$eval.builtIn(\r\n        {fn: getEnchantEquation(w)}, 'fn', {x:w.ticksSinceLast});\r\n}\r\nexport function getEnchantEquation(w: Weapon) : string {\r\n    if (w.type === AXE || w.type === SWORD) {\r\n        let val = w.sharpness || 0;\r\n        if(val) {\r\n            if (val === 1) {\r\n                val = 1;\r\n            } else {\r\n                val = (val - 1) * 0.5 + 1;\r\n            }\r\n        }\r\n        //enchantment penalty\r\n        let T = 20 / w.attackSpeed;\r\n        let eq = \"(\" + val + \" * min( (x +0.5) / \" + T + \", 1) )\";\r\n        return eq;\r\n    }\r\n    return '0';\r\n}\r\n\r\nexport function getDamageMultiplier(w : Weapon) : number {\r\n    /*\r\n    let T = 20 / w.attackSpeed;\r\n    let multiplier = 0.2 + ((w.ticksSinceLast + 0.5) / T)**2 * 0.8;\r\n    multiplier = bound(multiplier, .2, 1);\r\n    */\r\n    return functionPlot.$eval.builtIn(\r\n        {fn: getDamageMultiplierEquation(w)}, 'fn', {x:w.ticksSinceLast});\r\n}\r\nexport function getDamageMultiplierEquation(w : Weapon) : string {\r\n    let T = 20 / w.attackSpeed;\r\n    let multiplier = \"min(0.2 + ((x + 0.5) /\" +  T + \")^2 * 0.8, 1)\";\r\n    return multiplier;\r\n}\r\n\r\nexport function getStrengthBonus(w: Weapon) {\r\n    return 3 * (getEffectLevel(w.effects, STRENGTH.key) || 0);\r\n}\r\nexport function getWeaknessBonus(w: Weapon) {\r\n    return -(4 * (getEffectLevel(w.effects, WEAKNESS.key) || 0));\r\n}\r\nexport const MIN_CRITICAL_CHARGE= .848;\r\nexport function getCriticalMultiplier(w : Weapon) : number {\r\n    return functionPlot.$eval.builtIn(\r\n        {fn: getCriticalEquation(w)}, 'fn', {x:w.ticksSinceLast});\r\n}\r\nexport function getCriticalEquation(w : Weapon) : string {\r\n    //Positive = Critical OK\r\n    //Negative = No critical allowed\r\n    // 0 or +1 /2 --> [0,.5] --> [1, 1.5]\r\n    if (w.critical) {\r\n        return \"(max(0, sign(\" + getDamageMultiplierEquation(w) + \"- \" + \r\n        MIN_CRITICAL_CHARGE + \"))/2 + 1)\";\r\n    }\r\n    return \"1\";\r\n}\r\nexport function getDamage(w : Weapon): number {\r\n    \r\n    /*let multiplier = getDamageMultiplier(w);\r\n    return (w.damage * multiplier + getStrengthBonus(w) + getWeaknessBonus(w)) \r\n    * getCriticalMultiplier(w) + getEnchantModifier(w); */\r\n    return functionPlot.$eval.builtIn(\r\n        {fn: getDamageEquation(w)}, 'fn', {x:w.ticksSinceLast});\r\n}\r\nexport function getDamageEquation(w : Weapon): string {\r\n    let multiplier = getDamageMultiplierEquation(w);\r\n    /*\r\n    let eq =  \"max(0, (\" + w.damage + \"*(\" + multiplier + \")+\" + \r\n    getStrengthBonus(w) + \"+\" + getWeaknessBonus(w)+\r\n     \") *\" + getCriticalEquation(w) + \"+\" + getEnchantEquation(w) + \")\";\r\n     */\r\n     let eq =  \"max(0, (\" + w.damage + \"+\" + \r\n     getStrengthBonus(w) + \"+\" + getWeaknessBonus(w)+\r\n      \") *(\" + multiplier + \") *\" + getCriticalEquation(w) + \"+\" + getEnchantEquation(w) + \")\";\r\n    //console.log(\"Damage vs time: \" + eq);\r\n     return eq;\r\n}\r\nexport function getTicks(seconds: number) {\r\n    return Math.round(seconds * 20);\r\n}\r\nexport function getSeconds(ticks: number) {\r\n    return ticks / 20;\r\n}\r\nexport function toString(w: Weapon) {\r\n    let temp = \"\";\r\n    if (w.type === TRIDENT || w.type === FIST) {\r\n        temp += w.type + \" · \";\r\n    } else {\r\n        temp += w.material + \" \" + w.type + \" · \";\r\n    }\r\n    temp += percentCharge(w) + \"% · \";\r\n    if (w.critical) {\r\n        temp += \"Critical · \";\r\n    }\r\n    if (w.sharpness) {\r\n        temp += \"Sharpness \" + nomar(w.sharpness) + \" · \";\r\n    }\r\n    if (getEffectLevel(w.effects, STRENGTH.key)) {\r\n        temp += \"Strength \" + nomar(getEffectLevel(w.effects, STRENGTH.key)) + \" · \";\r\n    }  \r\n    if (getEffectLevel(w.effects, WEAKNESS.key)) {\r\n        temp += \"Weakness \" + nomar(getEffectLevel(w.effects, WEAKNESS.key)) + \" · \";\r\n    }\r\n    return temp + \" Melee\"\r\n}\r\nexport function ticksToFullCharge(w: Weapon) {\r\n    return 20 / w.attackSpeed;\r\n}\r\nexport function percentCharge(w: Weapon) {\r\n    return round(Math.min(100, w.ticksSinceLast*100/ticksToFullCharge(w)));\r\n}","import functionPlot from \"function-plot\";\r\nimport { FunctionPlotAnnotation, FunctionPlotOptions } from \"function-plot/dist/types\";\r\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\r\nimport { Button, Col, Collapse, Row } from \"react-bootstrap\";\r\nimport { useAppSelector } from \"../../app/hooks\";\r\nimport { selectDamage, selectEntity } from \"../activeSlice\";\r\nimport { Damage } from \"../calculations/damage\";\r\nimport { baseDamageType } from \"../calculations/damageTypes\";\r\nimport { Entity, MAX_SETUPS } from \"../calculations/entity\";\r\nimport Icon from \"../utility/Icons\";\r\nimport { damageEquation } from \"../utility/maths\";\r\nimport { range } from \"../utility/Utils\";\r\n\r\n\r\n//https://stackoverflow.com/questions/19014250/rerender-view-on-browser-resize-with-react\r\nfunction useWindowSize() {\r\n    const [size, setSize] = useState([0, 0]);\r\n    useLayoutEffect(() => {\r\n      function updateSize() {\r\n        setSize([window.innerWidth, window.innerHeight]);\r\n      }\r\n      window.addEventListener('resize', updateSize);\r\n      updateSize();\r\n      return () => window.removeEventListener('resize', updateSize);\r\n    }, []);\r\n    return size;\r\n}\r\ninterface CollapsableGraphType {\r\n    data: string[],\r\n    annotations: FunctionPlotAnnotation[],\r\n    widthReference: string,\r\n    target: string,\r\n    title: string,\r\n\r\n    xAxis: {domain: number[], label: string},\r\n    yAxis: {domain: number[], label: string},\r\n\r\n    hidden?: boolean\r\n}\r\nexport function CollapsableGraph(props: CollapsableGraphType) {\r\n    const [width, height] = useWindowSize();\r\n    const [toggle, setToggle] = useState(true);\r\n    \r\n    const options : FunctionPlotOptions = {\r\n        target: \"#\" + props.target,\r\n        title: props.title,\r\n        annotations: props.annotations,\r\n        height: 350,\r\n        width: 100,\r\n        yAxis: { domain: props.yAxis.domain, label: props.yAxis.label },\r\n        xAxis: { domain: props.xAxis.domain, label: props.xAxis.label },\r\n        grid: true,\r\n        data: range(0, MAX_SETUPS).map( (item) => {\r\n            return {fn: \"-999999\", nSamples:1000, range:[0,200]}\r\n        })\r\n    };\r\n\r\n    const refresh = () => {\r\n        //This function is not called for some reason.\r\n        //Cannot be called from inside useEffect.\r\n        options.title = props.title;\r\n        options.annotations = props.annotations;\r\n        options.width = document.getElementById(props.widthReference)!.clientWidth;\r\n        options.yAxis = { domain: props.yAxis.domain, label: props.yAxis.label };\r\n        options.xAxis = { domain: props.xAxis.domain, label: props.xAxis.label };\r\n\r\n        options.data = props.data.map( (item) => {\r\n            return {fn: item, range:[0,200], graphType:'polyline'}\r\n        });\r\n        for (let i = props.data.length ; i <= MAX_SETUPS ; i++) {\r\n            options.data.push({fn: \"-999999\",  range:[0,0]});\r\n        }\r\n        functionPlot(options)\r\n    }\r\n    useEffect(refresh);\r\n    return (\r\n        <Row noGutters>\r\n            { props.hidden ? \"\" :\r\n                <Button \r\n                    className=\"collapse-btn pr-2\"\r\n                    onClick={ () => {setToggle(!toggle); refresh()} }\r\n                >\r\n                    {\r\n                        toggle ? \r\n                        <Icon val=\"expand_less\"/> :\r\n                        <Icon val=\"expand_more\"/>\r\n                    }\r\n                    { props.title }\r\n                </Button>\r\n            }\r\n                <Collapse in={toggle}>\r\n                    <div id={props.target} className=\"graph\"></div>\r\n                </Collapse>\r\n        </Row>\r\n    );\r\n}\r\nexport function DamageGraph() {\r\n    const entity : Entity[] = useAppSelector(selectEntity);\r\n    const damage : Damage = useAppSelector(selectDamage);\r\n    const getFunctions = () => {\r\n        let data = [];\r\n        for (let item of entity) {\r\n            data.push( damageEquation(damage, item) );\r\n        }\r\n        return data;\r\n    }\r\n    const getPercents = () => {\r\n        let data = [];\r\n        for (let item of entity) {\r\n            //console.log( \"(100 - 100* ((\" + damageEquation(damage, item) + \")))/x\");\r\n            data.push( \"(100 - 100* ((\" + damageEquation(damage, item) + \"))/x)\");\r\n        }\r\n        return data;\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <Row>\r\n        <Col xs={12} lg={6} id=\"wrapper\">\r\n        {/*damageEquation(damage,entity)*/}\r\n            <CollapsableGraph \r\n                data={getFunctions()}\r\n                annotations={[{text:\"Damage\", x: damage.amount}]}\r\n                widthReference=\"wrapper\"\r\n                target=\"graphPane\"\r\n                title={baseDamageType(damage.type) + \" Damage Curve\"}\r\n                xAxis={ { domain: [0, Math.max(25, damage.amount+10)], label: \"Damage before reduction\"} }\r\n                yAxis={ {domain: [0, Math.max(25, damage.amount+10)], label: \"Damage after reduction\"} }\r\n                hidden\r\n            />\r\n        </Col>\r\n        <Col xs={12} lg={6} id=\"wrapper2\">\r\n            <CollapsableGraph \r\n                data={getPercents()}\r\n                annotations={[{text:\"Damage\", x: damage.amount}]}\r\n                widthReference=\"wrapper2\"\r\n                target=\"percentGraphPane\"\r\n                title={baseDamageType(damage.type) + \" % Damage Curve\"}\r\n                xAxis={ { domain: [0, Math.max(25, damage.amount+10)], label: \"Damage\"} }\r\n                yAxis={ {domain: [0, 100], label: \"% Damage Mitigated\"} }\r\n                hidden\r\n            />\r\n        </Col>\r\n        </Row>\r\n        </React.Fragment>\r\n    );\r\n}\r\n","import { Col } from \"react-bootstrap\";\r\nimport { CollapsableGraph } from \"../calculator/DamageGraph\";\r\n\r\nimport { fullChargeDamage, getDamageEquation, Weapon } from \"./weapon\";\r\n\r\nexport interface WeaponDamageGraphType {\r\n    weapon: Weapon\r\n}\r\nexport function WeaponDamageGraph(props: WeaponDamageGraphType) {\r\n    const getFunctions = () => {\r\n        let data = [];\r\n        let attackDamageEquation = getDamageEquation(props.weapon);\r\n        data.push( attackDamageEquation );\r\n        return data;\r\n    }\r\n    return (\r\n        <Col xs={12} lg={6} id=\"wrapper4\">\r\n        <CollapsableGraph\r\n        data={getFunctions()}\r\n        annotations={[{text:\"1 second\", x: 20},{text:\"Your Attack\", x: props.weapon.ticksSinceLast}]}\r\n        widthReference=\"wrapper4\"\r\n        target=\"weaponDamageGraphPane\"\r\n        title={\"Raw Melee Damage Dealt\"}\r\n        xAxis={ { domain: [0, Math.max(25, props.weapon.ticksSinceLast+5) ], label: \"Time before attack (ticks) - 1 sec = 20 ticks\"} }\r\n        yAxis={ {domain: [0, fullChargeDamage(props.weapon)+3], label: \"Damage\"} }\r\n        hidden={true}\r\n        />\r\n        </Col>\r\n    );\r\n}","import { Col } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectEntity } from \"../activeSlice\";\r\nimport { MELEE } from \"../calculations/damageTypes\";\r\nimport { CollapsableGraph } from \"../calculator/DamageGraph\";\r\nimport { damageEquation } from \"../utility/maths\";\r\nimport { fullChargeDamage, getDamageEquation, Weapon } from \"./weapon\";\r\n\r\n\r\nexport interface WeaponGraphType {\r\n    weapon: Weapon\r\n}\r\nexport function WeaponGraph(props: WeaponGraphType) {\r\n    const entity = useSelector(selectEntity);\r\n    const getFunctions = () => {\r\n        let data = [];\r\n        for (let item of entity) {\r\n            let eq = damageEquation({amount: 1, type: MELEE, ticks: 10}, item);\r\n            let attackDamageEquation = getDamageEquation(props.weapon);\r\n            data.push( (eq.replaceAll(\"x \",\"(\"+ attackDamageEquation + \")\")) );\r\n        }\r\n        return data;\r\n    }\r\n    return (\r\n        <Col xs={12} lg={6} id=\"wrapper3\">\r\n        <CollapsableGraph\r\n        data={getFunctions()}\r\n        annotations={[{text:\"1 second\", x: 20}, {text:\"Your Attack\", x: props.weapon.ticksSinceLast}]}\r\n        widthReference=\"wrapper3\"\r\n        target=\"weaponGraphPane\"\r\n        title={\"True Melee Damage Dealt\"}\r\n        xAxis={ { domain: [0, Math.max(25, props.weapon.ticksSinceLast+5)], label: \"Time before attack\"} }\r\n        yAxis={ {domain: [0, fullChargeDamage(props.weapon)+3], label: \"Damage\"} }\r\n        hidden={true}\r\n        />\r\n        </Col>\r\n    );\r\n}","import React, { useState } from \"react\";\r\nimport { Button, ButtonGroup, Col, Form, Row } from \"react-bootstrap\";\r\nimport NumericInput from \"react-numeric-input\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useAppDispatch } from \"../../app/hooks\";\r\nimport { selectDamage, setDamageType, setDamage, setDamageTicks } from \"../activeSlice\";\r\nimport { Damage, equals } from \"../calculations/damage\";\r\nimport { getEffect, setEffect, STRENGTH, WEAKNESS } from \"../calculations/effects\";\r\nimport { SHARPNESS } from \"../calculations/enchants\";\r\nimport { SyncSave } from \"../calculator/SyncSave\";\r\nimport { ItemBadge } from \"../setups/EnchantContainer\";\r\nimport { Tip } from \"../utility/Icons\";\r\nimport { DropInput, Collapseable } from \"../utility/Parts\";\r\nimport { round, range } from \"../utility/Utils\";\r\nimport { AXE, defaultWeapon, FIST, fullCharge, getDamage, getDamageMultiplier, getSeconds, getTicks, MIN_CRITICAL_CHARGE, percentCharge, preset, SWORD, toString, TRIDENT, Weapon, WEAPONS, WEAPON_MATERIALS } from \"./weapon\";\r\nimport { WeaponDamageGraph } from \"./WeaponDamageGraph\";\r\nimport { WeaponGraph } from \"./WeaponGraph\";\r\n\r\n\r\n\r\nconst _ = require('lodash');\r\nexport function WeaponEditor() {\r\n    const dispatch = useAppDispatch();\r\n    const globalDamage = useSelector(selectDamage);\r\n    const [weapon, setActualWeapon] = useState(defaultWeapon());\r\n    const setWeapon = (w: Weapon) => {\r\n        setActualWeapon(w);\r\n        dispatch(setDamageType(toString(w)));\r\n        dispatch(setDamage(getDamage(w)));\r\n        dispatch(setDamageTicks(w.ticksSinceLast))\r\n    }\r\n    const c = () => {\r\n        return _.cloneDeep(weapon);\r\n    }\r\n    const getDamageObj = (w: Weapon): Damage => {\r\n        return {amount: getDamage(w), ticks: w.ticksSinceLast, type: toString(w)}\r\n    }\r\n    \r\n    return (\r\n        <div className={equals(getDamageObj(weapon), globalDamage) ? \"active-calculator\" : \"inactive-calculator\"}>\r\n        <Row>\r\n            \r\n        <Col xs={12} lg={6} className=\"text-left\">\r\n            <Row className=\"text-left\">\r\n                <Col>\r\n                <ButtonGroup>\r\n                <DropInput \r\n                selected={weapon.type}\r\n                inputs={WEAPONS}\r\n                onDropClicked={(val) => {\r\n                    const x = c(); preset(x, val, x.material); setWeapon(x);\r\n                }}\r\n                />\r\n                {\r\n                    weapon.type === TRIDENT ||\r\n                    weapon.type === FIST ? \"\" :\r\n                    <DropInput \r\n                    selected={weapon.material}\r\n                    inputs={WEAPON_MATERIALS.get(weapon.type)!}\r\n                    onDropClicked={(val) => {\r\n                        const x = c(); preset(x, x.type, val); setWeapon(x);\r\n                    }}\r\n                    />\r\n                }\r\n                </ButtonGroup>\r\n                \r\n                <Form.Check custom inline label={\"Attempt Critical\"} type=\"checkbox\" name=\"critical\"\r\n                    checked={weapon.critical}\r\n                    id={`critical`}\r\n                    onChange={ (e) => {\r\n                        const x = c(); x.critical = !weapon.critical; setWeapon(x);\r\n                    }}\r\n                />\r\n                { \r\n                getDamageMultiplier(weapon) < MIN_CRITICAL_CHARGE ? \r\n                <>\r\n                <span id=\"no-critical\">❌ No critical hit</span>\r\n                <Tip \r\n                    target=\"no-critical\"\r\n                    val=\"Wait longer between attacks to perform a critical\"\r\n                    pos=\"top\"\r\n                />\r\n                </>\r\n                : \"\"\r\n                }\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                <span className=\"p-1\"> Wait \r\n                <NumericInput className=\"align-middle\"  min={0.05} max={20} step={.05} precision={3} \r\n                        value={getSeconds(weapon.ticksSinceLast)}\r\n                        onChange={(valueAsNumber:(number|null), stringValue:string, el: HTMLInputElement) => {\r\n                        //Poor documentation\r\n                            if (valueAsNumber) {\r\n                                const x = c(); x.ticksSinceLast = getTicks(valueAsNumber); setWeapon(x);\r\n                            }\r\n                        }}\r\n                        format={(num) => num + \" s (\" + (getTicks(num||0)) + \" ticks, \" + \r\n                        percentCharge(weapon) + \"%)\"}\r\n                />\r\n                before attack\r\n                </span>\r\n                <Button onClick={ () => {\r\n                    const x = c(); x.ticksSinceLast = round(fullCharge(x)); setWeapon(x);}}>\r\n                    max\r\n                </Button>\r\n                </Col>\r\n            </Row>\r\n        </Col>\r\n        <Col xs={12} lg={6} className=\"text-left\">\r\n            { \r\n            weapon.type === SWORD ||\r\n            weapon.type === AXE ?\r\n            <ItemBadge \r\n                name={SHARPNESS.key}\r\n                value={weapon.sharpness}\r\n                getValidValues={ () => {\r\n                    return (range(1, SHARPNESS.value+1))}}\r\n                onValueChange={(val) => {\r\n                    const x = c(); x.sharpness = (val); setWeapon(x);\r\n                }}\r\n                onDelete={() => {const x = c(); x.sharpness = (0); setWeapon(x);}}\r\n            /> : \"\"\r\n            }\r\n            <ItemBadge \r\n                name={STRENGTH.key}\r\n                value={(getEffect(weapon.effects, STRENGTH.key) || {value:0}).value}\r\n                getValidValues={ () => {\r\n                    return (range(1, 3))}}\r\n                onValueChange={(val) => {\r\n                    const x = c(); setEffect(x.effects, STRENGTH.key, (val)); setWeapon(x);\r\n                }}\r\n                onDelete={() => {const x = c(); setEffect(x.effects, STRENGTH.key, (0)); setWeapon(x)}}\r\n            />\r\n            <ItemBadge \r\n                name={WEAKNESS.key}\r\n                value={(getEffect(weapon.effects, WEAKNESS.key) || {value:0}).value}\r\n                getValidValues={ () => {\r\n                    return (range(1, 2))}}\r\n                onValueChange={(val) => {\r\n                    const x = c(); setEffect(x.effects, WEAKNESS.key, (val)); setWeapon(x);\r\n                }}\r\n                onDelete={() => {const x = c(); setEffect(x.effects, WEAKNESS.key, (0)); setWeapon(x);}}\r\n            />\r\n            \r\n        </Col>\r\n        </Row>\r\n        <Row>\r\n            <Col className=\"vc\">\r\n                <span className=\"p-1\">DPS: {round(getDamage(weapon) / getSeconds(weapon.ticksSinceLast))}</span>\r\n                {weapon.ticksSinceLast < 10 ? \r\n                <span>⚠️ Damage triggers 0.5 sec immunity</span>\r\n                : \"\"}\r\n            </Col>\r\n            <Col className=\"text-right\">\r\n                <SyncSave dmg={getDamageObj(weapon)} />\r\n            </Col>\r\n        </Row>\r\n        <Row>\r\n            <Col>\r\n        <Collapseable\r\n            title={\"Weapon Damage Graphs\"}\r\n            inner={(\r\n                <Row>\r\n                <WeaponGraph \r\n                weapon={weapon}\r\n                />\r\n                <WeaponDamageGraph \r\n                weapon={weapon}\r\n                />\r\n                </Row>\r\n            )}\r\n            className={\"w-100\"}\r\n        />\r\n        </Col>\r\n        </Row>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import { useState } from \"react\";\r\nimport { Col, Form, Row, Table } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useAppSelector } from \"../../app/hooks\";\r\nimport { selectDamage, selectEntity } from \"../activeSlice\";\r\nimport { getSetEPF } from \"../calculations/armor\";\r\nimport { Damage } from \"../calculations/damage\";\r\nimport * as d from '../calculations/damageTypes';\r\nimport { DAMAGE_ARRAY } from \"../calculations/damageTypes\";\r\nimport { Entity } from \"../calculations/entity\";\r\nimport { Tip } from \"../utility/Icons\";\r\nimport { takeDamage } from \"../utility/maths\";\r\nimport { HalfHeart } from \"../utility/Parts\";\r\nimport { getColor, getPresetColor, round } from \"../utility/Utils\";\r\n\r\nconst TAKEN = \"Damage Taken\";\r\nconst RESISTANCE = \"% Resistance\";\r\nconst EPF = \"EPF (Enchantment Protection Factor)\";\r\nconst SETTINGS = [TAKEN, RESISTANCE, EPF];\r\n\r\nexport function DamageSummaryTable() {\r\n    const globalDamage = useSelector(selectDamage);\r\n    const entities: Entity[] = useAppSelector(selectEntity);\r\n    const [show, setShow] = useState(TAKEN);\r\n    return (\r\n        <div>\r\n        <Row>\r\n            <Col>\r\n            <HalfHeart/>\r\n            <span>{round(globalDamage.amount)}</span>\r\n            </Col>\r\n        </Row>\r\n        <Row>\r\n        <Col>\r\n            \r\n            <Table className=\"damage-summary-table\">\r\n                <thead>\r\n                    <tr>\r\n                        {\r\n                        DAMAGE_ARRAY.map( (item) => \r\n                            <DamageHeader id={\"header-\" + item} type={item} />)\r\n                        }\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        entities.map( (item, index) => {\r\n                            return (<DamageSummary entity={index} show={show}/>);\r\n                        })\r\n                    }\r\n                </tbody>\r\n                <Tip target={\"header-\" + d.MELEE} val={\"ex: mobs, players, lava, cactus\"} pos=\"top\" />\r\n                <Tip target={\"header-\" + d.FALL} val={\"ex: falling off a cliff\"} pos=\"top\" />\r\n                <Tip target={\"header-\" + d.EXPLOSION} val={\"ex: tnt, creeper, crossbow with damaging firework\"} pos=\"top\" />\r\n                <Tip target={\"header-\" + d.FIRE} val={\"ex: burning while on fire\"} pos=\"top\" />\r\n                <Tip target={\"header-\" + d.PROJECTILE} val={\"ex: fireballs, arrows, thrown trident, shulker bullets\"} pos=\"top\" />\r\n                <Tip target={\"header-\" + d.MAGIC} val={\"ex: instant damage, poison\"} pos=\"top\" />\r\n            </Table>\r\n            <Form className=\"text-left p-1\">\r\n                <div key={\"table-settings\"}>\r\n                {\r\n                    SETTINGS.map( (item, index) =>\r\n                        (\r\n                        <Form.Check custom inline label={item} type=\"radio\" name=\"settings\"\r\n                            checked={item === show}\r\n                            id={`table-settings-${index}`}\r\n                            onChange={ (e) => setShow(item)}\r\n                        />)\r\n                    )\r\n                }\r\n                </div>\r\n            </Form>\r\n        </Col>\r\n        </Row>\r\n        </div>\r\n    );\r\n}\r\ninterface DamageHeaderType {\r\n    type: string,\r\n    id: string\r\n}\r\nexport function DamageHeader(props: DamageHeaderType)  {\r\n    //const [hover] = useState(false);\r\n    const damage : Damage = useAppSelector(selectDamage);\r\n    return (\r\n        \r\n        <th \r\n        \r\n            /* onMouseOver={() => setHover(true)} onMouseOut={() => setHover(false)}\r\n            onClick={ () => dispatch(setDamageType(props.type))}\r\n            You can't have a dangling { comment } inside of an element tag. \r\n            Just remove the {} and you should be fine\r\n            In between tags, however, you need {}\r\n            */\r\n        id={props.id}\r\n        className={damage.type.includes(props.type) ? \"highlighted fade-transition\" : \"fade-transition\"}\r\n        \r\n        >\r\n            {props.type}\r\n        </th>\r\n    );\r\n}\r\ninterface DamageSummaryType {\r\n    entity: number,\r\n    show: string\r\n}\r\nexport function DamageSummary(props: DamageSummaryType) {\r\n    const damage : Damage = useAppSelector(selectDamage);\r\n    \r\n    return (\r\n    <tr style={\r\n        {   borderLeftColor: getPresetColor(props.entity), \r\n            borderLeftWidth: 3, \r\n            borderLeftStyle: \"solid\"}}>\r\n        <DamageDisplay show={props.show} entity={props.entity} dmg={{amount: damage.amount, type: d.MELEE, ticks: 10}}></DamageDisplay>\r\n        <DamageDisplay show={props.show} entity={props.entity} dmg={{amount: damage.amount, type: d.FALL, ticks: 10}}></DamageDisplay>\r\n        <DamageDisplay show={props.show} entity={props.entity} dmg={{amount: damage.amount, type: d.EXPLOSION, ticks: 10}}></DamageDisplay>\r\n        <DamageDisplay show={props.show} entity={props.entity} dmg={{amount: damage.amount, type: d.FIRE, ticks: 10}}></DamageDisplay>\r\n        <DamageDisplay show={props.show} entity={props.entity} dmg={{amount: damage.amount, type: d.PROJECTILE, ticks: 10}}></DamageDisplay>\r\n        <DamageDisplay show={props.show} entity={props.entity} dmg={{amount: damage.amount, type: d.MAGIC, ticks: 10}}></DamageDisplay>\r\n    </tr>);\r\n}\r\ninterface DamageDisplayType {\r\n    dmg: Damage,\r\n    entity: number,\r\n    show: string\r\n}\r\nexport function DamageDisplay(props: DamageDisplayType) {\r\n    const entity : Entity = useAppSelector(selectEntity)[props.entity];\r\n\r\n    const getContent = () => {\r\n        if (props.show === EPF) {\r\n            return (getSetEPF(entity.armor, props.dmg.type));\r\n        }\r\n        if (props.show === RESISTANCE) {\r\n            return getResist() + \"%\";\r\n        }\r\n        if (props.show === TAKEN) {\r\n            return (round(takeDamage(props.dmg, entity)));\r\n        }\r\n    }\r\n    const getResist = () => {\r\n        return (round(100- ( (takeDamage(props.dmg, entity))*100 / props.dmg.amount)));\r\n    }\r\n    return (\r\n        <td \r\n            style={{backgroundColor:getColor(95,getResist())}}\r\n        >\r\n            {getContent()}\r\n        </td>\r\n    );\r\n}","import update from \"immutability-helper\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport NumericInput from \"react-numeric-input\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useAppDispatch } from \"../../app/hooks\";\r\nimport { selectDamage } from \"../activeSlice\";\r\nimport { equals } from \"../calculations/damage\";\r\nimport { EXPLOSION } from \"../calculations/damageTypes\";\r\nimport { SyncSaveRow } from \"../calculator/SyncSave\";\r\nimport { DropInput, sync } from \"../utility/Parts\";\r\n\r\nexport function Explosion() {\r\n    const dispatch = useAppDispatch();\r\n    const globalDamage = useSelector(selectDamage);\r\n    const [localDamage, setDamage] = useState( {amount: 71, type: EXPLOSION, ticks: 10} )\r\n    const [power, setPower] = useState(5);\r\n    const [distance, setDistance] = useState(0);\r\n    const [exposure, setExposure] = useState(1);\r\n    const EASY = 'Easy (x 0.5)';\r\n    const NORMAL = 'Normal (x 1.0)';\r\n    const HARD = 'Hard (x 1.5)';\r\n    const [difficulty, setDifficulty] = useState(NORMAL);\r\n\r\n    const EXPLOSION_TYPES = [\r\n        \"7 Wither Spawn\", \"6 End Crystal\", \"6 Charged Creeper\",\r\n        \"5 Bed\", \"5 Respawn Anchor\", \"4 TNT\",\r\n        \"3 Creeper\", \"1 Ghast Fireball\", \"1 Wither Skull\", \"0 Custom\"\r\n    ];\r\n    const [type, setType] = useState(\"5 Bed\");\r\n\r\n    const explosionDamage = (power: number, distance: number, exposure: number, difficulty: string) : number => {\r\n        \r\n        let radius = 2 * power;\r\n        if (distance >  radius) return 0;\r\n        let impact = (1 - (distance / radius)) * exposure;\r\n        let multiplier = 1;\r\n        if (difficulty === EASY) multiplier = .5;\r\n        if (difficulty === HARD) multiplier = 1.5;\r\n        return Math.floor( (impact * impact + impact) * 7 * power * multiplier + 1);\r\n    }\r\n    const summary = (power: number, distance: number, exposure: number, difficulty: string, type: string) => {\r\n        return power + \" \" + type.split(\" \").slice(1).join(\" \") + \" \" + EXPLOSION + \" · \" + \r\n            distance + \" blocks away · \" + (exposure*100) + \"% exposure · \" + difficulty;\r\n    }\r\n    useEffect( () => {\r\n        setDamage(\r\n            update(localDamage, \r\n                {amount: {$set: explosionDamage(power, distance, exposure, difficulty)},\r\n                 type: {$set: summary(power, distance, exposure, difficulty, type)}\r\n                }));\r\n        sync(dispatch, localDamage);\r\n    }, [localDamage, power, distance, exposure, difficulty, type, dispatch]);\r\n    return (\r\n        <div className={\r\n            equals(localDamage, globalDamage)\r\n            ? \"active-calculator\" : \"inactive-calculator\"}>\r\n        <Row className=\"p-1\">\r\n            <Col>\r\n            \r\n                <span>Explosion Power </span>\r\n                \r\n                <NumericInput  min={0} max={10000} step={1} value={power}\r\n                    onChange={(valueAsNumber:(number|null)) => {\r\n                        setType(\"0 Custom\");\r\n                        setPower(valueAsNumber||0);\r\n                    }}\r\n                />\r\n                <DropInput\r\n                    className={\"d-inline-block\"}\r\n                    inputs={EXPLOSION_TYPES}\r\n                    selected={type}\r\n                    onDropClicked={(val) => {\r\n                        setType(val);\r\n                        setPower(parseInt(val.split(\" \")[0]));\r\n                    }}\r\n                />\r\n                \r\n            </Col>\r\n        </Row>\r\n        <Row className=\"p-1\">\r\n            <Col>\r\n            \r\n            <div className=\"no-wrap d-inline-block\">\r\n            <span>Distance </span>\r\n            <NumericInput  min={0} max={10000} step={.1} value={distance}\r\n                onChange={(valueAsNumber:(number|null)) => {\r\n                    setDistance(valueAsNumber||0);\r\n                }}\r\n            />\r\n            </div>\r\n            <div className=\"no-wrap d-inline-block\">\r\n            <span>Exposure </span>\r\n            <NumericInput  min={0} max={100} step={1} value={exposure * 100}\r\n                onChange={(valueAsNumber:(number|null)) => {\r\n                    setExposure( (valueAsNumber||0)/100);\r\n                }}\r\n                format={(val) => (val||0) + \"%\"}\r\n            />\r\n            </div>\r\n            </Col >\r\n        </Row>\r\n        <Row className=\"p-1\">\r\n            <Col>\r\n            <span>Difficulty </span>\r\n            <DropInput\r\n            className=\"d-inline-block\"\r\n            selected={difficulty}\r\n            inputs={[EASY, NORMAL, HARD]}\r\n            onDropClicked={(val) => setDifficulty(val)}\r\n            />\r\n            </Col>\r\n        </Row>\r\n        \r\n        <SyncSaveRow dmg={localDamage} label={\"Explosion\"}/>\r\n        </div>\r\n    );\r\n}","import update from \"immutability-helper\";\r\nimport { useState } from \"react\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport NumericInput from \"react-numeric-input\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useAppDispatch } from \"../../app/hooks\";\r\nimport { selectDamage } from \"../activeSlice\";\r\nimport { equals } from \"../calculations/damage\";\r\nimport { FALL } from \"../calculations/damageTypes\";\r\nimport { SyncSave } from \"../calculator/SyncSave\";\r\nimport { sync } from \"../utility/Parts\";\r\n\r\nexport function Fall() {\r\n    const dispatch = useAppDispatch();\r\n    const globalDamage = useSelector(selectDamage);\r\n    const [localDamage, setActualDamage] = useState( {amount: 1, type: \"4 block Fall\", ticks: 10} )\r\n    const [height, setHeight] = useState(4);\r\n    const fallDamage = (height: number) : number => {\r\n        setHeight(height);\r\n        return Math.max(0, height - 3);\r\n    }\r\n    const minFallDamage = () => {\r\n        return {amount: Math.max(0,localDamage.amount - 1), ticks: 10, type: FALL };\r\n    }\r\n    return (\r\n        <div className={equals(localDamage, globalDamage) || equals(minFallDamage(), globalDamage)\r\n            ? \"active-calculator\" : \"inactive-calculator\"}>\r\n            <Row>\r\n                <Col md={6} lg={8}>\r\n                <span>Fall Height: </span>\r\n                <NumericInput  min={0} max={10000} step={1} \r\n                    value={height}\r\n                    onChange={(valueAsNumber:(number|null), stringValue:string, el: HTMLInputElement) => {\r\n                        if (valueAsNumber || valueAsNumber === 0) {\r\n                            sync(dispatch, update(localDamage, \r\n                                {amount: {$set: fallDamage(valueAsNumber)},\r\n                                 type: {$set: valueAsNumber + \" block \" + FALL}}), setActualDamage);\r\n                        }\r\n                    }}\r\n                />\r\n                <span> *For heights less than 23, use max</span>\r\n                </Col >\r\n                <Col md={6} lg={4} className=\"text-right\">\r\n                    <span>Max</span>\r\n                    <SyncSave dmg={localDamage}/>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col md={6} lg={8}>\r\n                </Col>\r\n                <Col md={6} lg={4} className=\"text-right\">\r\n                    <span>Min</span>\r\n                    <SyncSave dmg={minFallDamage()} />\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    );\r\n}","import React from \"react\";\r\nimport ContentEditable from 'react-contenteditable';\r\n\r\n\r\ninterface EditType {\r\n    display: string,\r\n    className?: string,\r\n    id?: string,\r\n    save: (value : string) => void\r\n    \r\n}\r\nexport default class EditInPlace extends React.Component<EditType, {editing:boolean, html:string}> {\r\n    constructor (props: EditType) {\r\n        super(props);\r\n        this.handleFocus = this.handleFocus.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.dispatchChange = this.dispatchChange.bind(this);\r\n        this.state = {\r\n            editing: false,\r\n            html: this.props.display\r\n        }\r\n    }\r\n    handleFocus(evt : any) {\r\n        this.setState({editing: true, html: this.props.display});\r\n    }\r\n    handleChange(evt : any) {\r\n        this.setState({html: evt.target.value});\r\n    }\r\n    dispatchChange(value : string) {\r\n        if (value && value.trim()) {\r\n            this.props.save(value);\r\n        }\r\n        this.setState({editing: false});\r\n    }\r\n    render() {\r\n        let shown = this.state.editing ? this.state.html : this.props.display;\r\n        let edit = (\r\n            <ContentEditable\r\n                className={\"box rounded p-1 m-1 vc d-inline-block \" + (this.props.className || \"\")}\r\n                id={this.props.id}\r\n                html={`${shown}`}\r\n                spellCheck={false}\r\n                onFocus={(e) => {this.handleFocus(e)}}\r\n                onBlur={(e) => { \r\n                        //text content is different from innerHTML\r\n                        this.dispatchChange(e.target.textContent!) \r\n                    }\r\n                } \r\n                onChange={this.handleChange}\r\n                tagName='span'\r\n            />\r\n            );\r\n        //}\r\n        //Because ( ) is not JSX, do NOT put { } around edit\r\n        //If you have a JSX component around edit, put {} around edit\r\n        return (\r\n            edit\r\n        );\r\n    }\r\n}","import update from 'immutability-helper';\r\nimport { useState } from \"react\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport NumericInput from \"react-numeric-input\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useAppDispatch } from \"../../app/hooks\";\r\nimport { getSeconds, getTicks } from \"../weapon/weapon\";\r\nimport { selectDamage } from \"../activeSlice\";\r\nimport { copy, defaultDamage, equals } from \"../calculations/damage\";\r\nimport { DAMAGE_ARRAY } from \"../calculations/damageTypes\";\r\nimport { SyncSave } from \"../calculator/SyncSave\";\r\nimport EditInPlace from \"../utility/EditInPlace\";\r\nimport { DropInput, HalfHeart, sync } from \"../utility/Parts\";\r\n\r\nexport function GeneralCalculator() {\r\n    const dispatch = useAppDispatch();\r\n    const globalDamage = useSelector(selectDamage);\r\n    const [localDamage, setDamage] = useState(defaultDamage());\r\n\r\n    return (\r\n        <Row noGutters className={equals(localDamage, globalDamage) ? \"active-calculator\" : \"inactive-calculator\"}>\r\n        <Col md={6} lg={8}>\r\n                <HalfHeart />\r\n                <div className=\"vc d-inline-block\">\r\n                    <NumericInput  min={0} max={10000} step={1} \r\n                    precision={2} value={localDamage.amount}\r\n                    onChange={(valueAsNumber:(number|null)) => {\r\n                        sync(dispatch, update(localDamage, {amount: {$set: valueAsNumber as number}}), setDamage);\r\n                    }}\r\n                    />\r\n                </div>\r\n                \r\n                <div className=\"vc d-inline-block\">\r\n                    <NumericInput  min={0} max={1000} step={.05} \r\n                    precision={2} value={getSeconds(localDamage.ticks)}\r\n                    onChange={(valueAsNumber:(number|null)) => {\r\n                        sync(dispatch, update(localDamage, {ticks: {$set: getTicks(valueAsNumber as number)}}), setDamage);\r\n                    }}\r\n                    format={(num) => num + \" sec (\" + (getTicks(num||0)) + \" ticks)\"}\r\n                    />\r\n                </div>\r\n                <div className=\"vc d-inline-block\">\r\n                <DropInput\r\n                    selected={localDamage.type}\r\n                    inputs={DAMAGE_ARRAY}\r\n                    onDropClicked={ (val) => {\r\n                        sync(dispatch, update(localDamage, {type: {$set: val}}), setDamage);\r\n                    }}\r\n                />\r\n                </div>\r\n                <EditInPlace\r\n                    display={localDamage.type}\r\n                    save={(val: string) => {\r\n                        sync(dispatch, update(localDamage, {type: {$set: val}}), setDamage);\r\n                    }}\r\n                />\r\n                {localDamage.ticks < 10 ? \r\n                <span className=\"p-1 no-wrap\">⚠️ Damage triggers 0.5 sec immunity</span>\r\n                : \"\"}\r\n                \r\n        </Col>\r\n        <Col md={6} lg={4} className=\"text-right\">\r\n        <div className=\"no-wrap d-inline-block vc\">\r\n            {/* Hey we copied the damage object so things wouldn't snowball */}\r\n        <SyncSave dmg={copy(localDamage)} />\r\n        </div>\r\n        </Col>\r\n        </Row>\r\n    )\r\n}","import 'bootstrap/dist/css/bootstrap.css'; // or include from a CDN\r\nimport React, { useState } from \"react\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport RangeSlider from 'react-bootstrap-range-slider';\r\nimport 'react-bootstrap-range-slider/dist/react-bootstrap-range-slider.css';\r\nimport { useAppSelector } from \"../../app/hooks\";\r\nimport { WeaponEditor } from \"../weapon/WeaponEditor\";\r\nimport { selectDamage } from \"../activeSlice\";\r\nimport { Damage } from \"../calculations/damage\";\r\nimport { DamageGraph } from \"./DamageGraph\";\r\nimport { DamageSummaryTable } from \"./DamageSummary\";\r\nimport { Explosion } from \"../explosion/Explosion\";\r\nimport { Fall } from \"../fall/Fall\";\r\nimport { GeneralCalculator } from \"../general/GeneralCalculator\";\r\nimport { Collapseable } from \"../utility/Parts\";\r\n\r\n\r\n\r\nconst Scroll   = require('react-scroll');\r\nconst Element  = Scroll.Element;\r\n\r\n\r\ninterface DamageInputType {\r\n    \r\n}\r\nexport function DamageInput(props: DamageInputType) {\r\n    const [value, setValue] = useState(0);\r\n    return (\r\n        <RangeSlider\r\n            value={value}\r\n            onChange={(e : React.ChangeEvent<HTMLInputElement>) => setValue(parseInt(e.target.value))}\r\n        />\r\n    )\r\n}\r\n\r\ninterface DamageCalculatorType {\r\n    \r\n}\r\nexport function DamageCalculator(props : DamageCalculatorType) {\r\n    const damage : Damage = useAppSelector(selectDamage);\r\n    return (\r\n        <div className=\"container-top text-left\">\r\n            <Row noGutters>\r\n            <Col>\r\n            <Element name=\"damage-link\"></Element>\r\n            <h3 className=\"text-left bottom-border p-1\">Damage Calculations</h3>\r\n            </Col>\r\n            </Row>\r\n            \r\n            <Collapseable \r\n                \r\n            title={\"General calculator\"}\r\n            className={\"w-100\"}\r\n            inner={\r\n                <GeneralCalculator />\r\n            }\r\n            />\r\n\r\n            <Collapseable \r\n            defaultOpen\r\n            title={\"Weapon damage calculator\"}\r\n            inner={(\r\n                <WeaponEditor />\r\n            )}\r\n            className={\"w-100\"}\r\n            />\r\n            \r\n            <Collapseable \r\n            title={\"Explosion damage calculator\"}\r\n            inner ={(\r\n                <Explosion />\r\n            )}\r\n            className={\"w-100\"}\r\n            />\r\n\r\n            <Collapseable \r\n            title={\"Fall damage calculator\"}\r\n            inner ={(\r\n                <Fall />\r\n            )}\r\n            className={\"w-100\"}\r\n            />\r\n\r\n            <Collapseable\r\n            defaultOpen\r\n            title={damage.type + \" vs. Setups\"}\r\n            className=\"w-100\"\r\n            inner={\r\n                    <DamageSummaryTable />\r\n            }\r\n            />\r\n\r\n            <Collapseable\r\n            title={damage.type + \" Damage Graphs\"}\r\n            inner={(\r\n                <DamageGraph />\r\n            )}\r\n            className={\"w-100\"}\r\n            />\r\n            \r\n        </div>\r\n    );\r\n}\r\n\r\n","import React from \"react\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/hooks\";\r\nimport { selectEntity, setType } from \"../activeSlice\";\r\nimport { armor_data, getTough, invalidEnchants, MATERIAL_ARRAY, PIECE_ARRAY } from \"../calculations/armor\";\r\nimport { Entity } from \"../calculations/entity\";\r\nimport { Tip } from \"../utility/Icons\";\r\nimport { DropInput } from \"../utility/Parts\";\r\nimport { EnchantContainer } from \"./EnchantContainer\";\r\n\r\ninterface ArmorSlotType {\r\n    entity: number\r\n    slot: number\r\n}\r\nexport function ArmorSlot(props : ArmorSlotType) {\r\n    const entity : Entity = useAppSelector(selectEntity)[props.entity];\r\n    const dispatch = useAppDispatch();\r\n    const onMaterialChange = (value: string) => {\r\n        dispatch(setType({entity: props.entity, type: value.split(\" \")[2], slot: props.slot}));\r\n    }\r\n    const getFormatted = (type : string) => {\r\n        return armor_data.get(type)![props.slot] + \" \" + getTough(type) + \" \" + type;\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <Row className=\"container-bottom\">\r\n            <Col sm={3} className=\"min-width-1\">\r\n            <span className=\"border-bottom armor-title\">{PIECE_ARRAY[props.slot]}</span>\r\n\r\n            <DropInput \r\n                selected={getFormatted(entity.armor[props.slot].type)}\r\n                inputs={MATERIAL_ARRAY[props.slot].map( (item) => getFormatted(item))}\r\n                onDropClicked={(value) => onMaterialChange(value)}\r\n            />\r\n\r\n            </Col>\r\n            <Col sm={9}>\r\n                <div className=\"text-left\">\r\n                    <EnchantContainer entity={props.entity} slot={props.slot} />\r\n                    {\r\n                    invalidEnchants(entity.armor[props.slot]) ? (\r\n                        <>\r\n                        <span id={\"invalid-enchant-\" + props.entity + \"-\" + props.slot}>⚠️</span>\r\n                        <Tip \r\n                            target={\"invalid-enchant-\" + props.entity + \"-\" + props.slot}\r\n                            val={\"Normally, only one of the following can be applied: Protection,\" + \r\n                            \" Projectile Protection, Blast Protection, or Fire Protection\"}\r\n                            pos={\"right\"}\r\n                        />\r\n                        </>\r\n                    ): \"\"\r\n                    }\r\n                </div>\r\n            </Col>\r\n        </Row>\r\n        </React.Fragment>\r\n    )\r\n}\r\n","import { Col } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useAppDispatch } from \"../../app/hooks\";\r\nimport { removeEffect, selectEntity, setEffect } from \"../activeSlice\";\r\nimport { EFFECTS, ENTITY_EFFECTS, excludeEffect, getEffect, Effect } from \"../calculations/effects\";\r\nimport { getEnchantment, NONE } from \"../calculations/enchants\";\r\nimport { range } from \"../utility/Utils\";\r\nimport { Add, ItemBadge } from \"./EnchantContainer\";\r\n\r\nexport interface EffectContainerType {\r\n    entity: number\r\n}\r\nexport function EffectContainer(props: EffectContainerType) {\r\n    const dispatch = useAppDispatch();\r\n    const entity = useSelector(selectEntity)[props.entity];\r\n    return (\r\n        <Col>\r\n        <span className=\"armor-title\">Effects</span>\r\n        {\r\n            entity.effects.map( (item: Effect) => {\r\n            return (\r\n                <ItemBadge\r\n                    name={item.key}\r\n                    value={item.value}\r\n                    onDelete={ () => \r\n                        dispatch(removeEffect({entity:props.entity, name: item.key}))}\r\n                    onValueChange={ (val) => {\r\n                        dispatch(setEffect({entity:props.entity, name:item.key, level: val}))\r\n                    }}\r\n                    getValidValues={ () => {\r\n                        return range(1, getEffect(EFFECTS, item.key)!.value+1);\r\n                    }}\r\n                />\r\n            );\r\n        })//cannot put a semicolon here?\r\n        }\r\n        <Add \r\n            defaultName={NONE.key}\r\n            defaultValue={1}\r\n            validate={(name, value, setter) => {\r\n                if (value > getEnchantment(EFFECTS, name)!) {\r\n                    setter(getEnchantment(EFFECTS, name)!);\r\n                }\r\n            }}\r\n            getValid={ () => {\r\n                return excludeEffect(ENTITY_EFFECTS, entity.effects);\r\n            }}\r\n            getValidValues={ (name) => {\r\n                return range(1,getEffect(EFFECTS, name)!.value+1);\r\n            }}\r\n            onSave={ (name, value) => {\r\n                dispatch(setEffect({entity: props.entity, name: name, level: value}));\r\n            }}\r\n        />\r\n        </Col>\r\n    );\r\n}","import { Row } from \"react-bootstrap\";\r\nimport { ArmorSlot } from \"./ArmorSlot\";\r\nimport { EffectContainer } from \"./EffectContainer\";\r\n\r\ninterface ArmorContainerType {\r\n    entity: number\r\n}\r\nexport function EntityContainer(props: ArmorContainerType) {\r\n    return (\r\n        <div className=\"\">\r\n          <ArmorSlot entity={props.entity} slot={0}/>\r\n          <ArmorSlot entity={props.entity} slot={1}/>\r\n          <ArmorSlot entity={props.entity} slot={2}/>\r\n          <ArmorSlot entity={props.entity} slot={3}/>\r\n          <Row>\r\n              <EffectContainer entity={props.entity} />\r\n          </Row>\r\n        </div>\r\n    );\r\n}","import React, { useState } from \"react\";\r\nimport { Button, ButtonGroup, Col, Row } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useAppDispatch } from \"../../app/hooks\";\r\nimport { addSetup, removeSetup, selectEntity } from \"../activeSlice\";\r\nimport { getSetArmor, getSetToughness } from \"../calculations/armor\";\r\nimport { Entity, getDefaultSetup, maxHealth, maxSetups, summary } from \"../calculations/entity\";\r\nimport Icon from \"../utility/Icons\";\r\nimport { ArmorBar, Collapseable, HealthBar, ToughnessBar } from \"../utility/Parts\";\r\nimport { getPresetColor } from \"../utility/Utils\";\r\nimport { EntityContainer } from \"./EntityContainer\";\r\nconst Scroll   = require('react-scroll');\r\nconst Element  = Scroll.Element;\r\nconst _ = require('lodash');\r\n\r\nexport function SetupContainer() {\r\n    const entities : Entity[] = useSelector(selectEntity);\r\n    const dispatch = useAppDispatch();\r\n    const [active, setActive] = useState(0);\r\n    \r\n    return (\r\n        <div className=\"container-top\">\r\n            <Row noGutters>\r\n                <Col>\r\n                    <Element name=\"setup-link\"></Element>\r\n                    <h3 className=\"text-left bottom-border p-1\">Setups</h3>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                {\r\n                entities.map( (item, index) => {\r\n                    return (\r\n                    <Row noGutters>\r\n                        <Col xs={12} className=\"text-left pl-2\"\r\n                            style={\r\n                                {   borderLeftColor: getPresetColor(index), \r\n                                    borderLeftWidth: 3, \r\n                                    borderLeftStyle: \"solid\"}\r\n                                }\r\n                        >\r\n                            <Collapseable inner={<EntityContainer entity={index}/>}\r\n                                title={\r\n                                    <>\r\n                                    <span>{\" \" + summary(item) + \" \"}</span>\r\n                                    <ArmorBar armor={getSetArmor(item.armor)} />\r\n                                    <span> | </span>\r\n                                    <ToughnessBar toughness={getSetToughness(item.armor)} />\r\n                                    <span> | </span>\r\n                                    <HealthBar health={maxHealth(item)} />\r\n                                    </>\r\n                                }\r\n                                options={\r\n                                    <React.Fragment>\r\n                                    \r\n                                    <ButtonGroup>\r\n                                            {!maxSetups(entities) ?\r\n                                        <Button onClick={() => \r\n                                            dispatch(addSetup(\r\n                                                _.cloneDeep(item)\r\n                                            ))}\r\n                                        >\r\n                                            <Icon val=\"content_copy\" />\r\n                                        </Button> : \"\"\r\n                                        }\r\n                                        {entities.length > 1 ?\r\n                                        <Button onClick={() => dispatch(removeSetup(index))}>\r\n                                            <Icon val=\"delete_outline\" />\r\n                                        </Button> : \"\"\r\n                                        }\r\n                                        \r\n                                    </ButtonGroup>\r\n                                    </React.Fragment>\r\n                                }\r\n                                className=\"w-80\"\r\n                                override={active === index ? \"open\" : \"closed\"}\r\n                                handleCollapse={(open) => {\r\n                                    if (open) {\r\n                                        setActive(index);\r\n                                    } else {\r\n                                        setActive(-1);\r\n                                    }\r\n                                }}\r\n                            />\r\n                            \r\n                        </Col>\r\n                    </Row>\r\n                    \r\n                    );\r\n                })\r\n                }\r\n                    <Row noGutters>\r\n                        <Col>\r\n                        {\r\n                        !maxSetups(entities) ?\r\n                        <Button  onClick={() => dispatch(addSetup(getDefaultSetup()))}>\r\n                            <Icon  val=\"add\" /> New Setup\r\n                        </Button> : \"\"\r\n                        }\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    );\r\n}","import { XYCoord } from 'dnd-core'\r\nimport { FC, useRef } from 'react'\r\nimport { Button, ButtonGroup, Col, Form, Row } from 'react-bootstrap'\r\nimport { DropTargetMonitor, useDrag, useDrop } from 'react-dnd'\r\nimport { useAppDispatch } from '../../app/hooks'\r\nimport { addDamageTimes, removeDamage, saveDamage, toggleDamage } from '../activeSlice'\r\nimport { Damage } from '../calculations/damage'\r\nimport Icon from '../utility/Icons'\r\nimport { HalfHeart } from '../utility/Parts'\r\nimport { round } from '../utility/Utils'\r\n\r\nconst _ = require('lodash');\r\n\r\nconst style = {\r\n  border: '1px dashed gray',\r\n  padding: '0rem .51rem',\r\n  marginBottom: '.5rem',\r\n  backgroundColor: 'white',\r\n  cursor: 'move',\r\n}\r\n\r\nexport interface CardProps {\r\n  id: any\r\n  visible: boolean\r\n  times: number\r\n  damage: Damage\r\n  index: number\r\n  moveCard: (dragIndex: number, hoverIndex: number) => void\r\n}\r\n\r\ninterface DragItem {\r\n  index: number\r\n  id: string\r\n  type: string\r\n}\r\n/* A working example yay! */\r\nexport const Card: FC<CardProps> = ({ id, visible, times, damage, index, moveCard }) => {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const ref = useRef<HTMLDivElement>(null)\r\n  const [{ handlerId }, drop] = useDrop({\r\n    accept: 'card',\r\n    collect(monitor) {\r\n      return {\r\n        handlerId: monitor.getHandlerId(),\r\n      }\r\n    },\r\n    hover(item: DragItem, monitor: DropTargetMonitor) {\r\n      if (!ref.current) {\r\n        return\r\n      }\r\n      const dragIndex = item.index\r\n      const hoverIndex = index\r\n\r\n      // Don't replace items with themselves\r\n      if (dragIndex === hoverIndex) {\r\n        return\r\n      }\r\n\r\n      // Determine rectangle on screen\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect()\r\n\r\n      // Get vertical middle\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\r\n\r\n      // Determine mouse position\r\n      const clientOffset = monitor.getClientOffset()\r\n\r\n      // Get pixels to the top\r\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top\r\n\r\n      // Only perform the move when the mouse has crossed half of the items height\r\n      // When dragging downwards, only move when the cursor is below 50%\r\n      // When dragging upwards, only move when the cursor is above 50%\r\n\r\n      // Dragging downwards\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return\r\n      }\r\n\r\n      // Dragging upwards\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return\r\n      }\r\n\r\n      // Time to actually perform the action\r\n      moveCard(dragIndex, hoverIndex)\r\n\r\n      // Note: we're mutating the monitor item here!\r\n      // Generally it's better to avoid mutations,\r\n      // but it's good here for the sake of performance\r\n      // to avoid expensive index searches.\r\n      item.index = hoverIndex\r\n    },\r\n  })\r\n\r\n  const [{ isDragging }, drag] = useDrag({\r\n    type: 'card',\r\n    item: () => {\r\n      return { id, index }\r\n    },\r\n    collect: (monitor: any) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  })\r\n\r\n  const opacity = isDragging ? 0 : 1\r\n  drag(drop(ref))\r\n  return (\r\n    <div className=\"text-left vc\" ref={ref} style={{ ...style, opacity }} data-handler-id={handlerId}>\r\n      <Row className=\"align-items-center\" noGutters>\r\n      <Col xs={9}>\r\n        \r\n        <Form.Check inline \r\n            className=\"vc\" \r\n            label=\"\" \r\n            type={'checkbox'}\r\n            onChange={(e) => dispatch(toggleDamage(id))} \r\n            defaultChecked\r\n        />\r\n        <ButtonGroup>\r\n          <Button onClick={ () => dispatch(addDamageTimes({id: id, change: 1}))}>\r\n            <Icon val=\"add\" />\r\n          </Button>\r\n          <Button onClick={ () => dispatch(addDamageTimes({id: id, change: -1}))}>\r\n            <Icon val=\"remove\" />\r\n          </Button>\r\n        </ButtonGroup>\r\n        <span className=\"vc no-wrap\">{times} x </span>\r\n        <HalfHeart />\r\n        <span className=\"vc m-0\">{ \" \" + round(damage.amount) + \" · \" + damage.type}</span>\r\n      </Col>\r\n      <Col xs={3} className=\"text-right\">\r\n        \r\n        <ButtonGroup >\r\n          <Button onClick={() => \r\n              dispatch(saveDamage(\r\n                  _.cloneDeep(damage)\r\n              ))}\r\n          >\r\n              <Icon val=\"content_copy\" />\r\n          </Button>\r\n          <Button onClick={() => dispatch(removeDamage(id))}>\r\n              <Icon val=\"delete_outline\" />\r\n          </Button>\r\n        </ButtonGroup>\r\n      </Col>\r\n      </Row>\r\n    </div>\r\n  )\r\n}\r\n","import { FC } from 'react'\r\nimport { Col, Row } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useAppDispatch } from '../../app/hooks'\r\nimport { moveDamage, selectDamages } from '../activeSlice'\r\nimport { DamageItem } from '../calculations/damage'\r\nimport { Card } from './DamageCard'\r\n\r\nexport interface Item {\r\n  id: number\r\n  text: string\r\n}\r\n\r\n\r\nexport const DragContainer: FC = () => {\r\n    const dispatch = useAppDispatch();\r\n    const damages = useSelector(selectDamages);\r\n\r\n    const moveCard = \r\n      (dragIndex: number, hoverIndex: number) => {\r\n        dispatch(moveDamage({from:dragIndex, to:hoverIndex}));\r\n        \r\n    }\r\n    \r\n\r\n    const renderCard = (card: DamageItem, index: number) => {\r\n      return (\r\n        <Card\r\n          key={card.id}\r\n          index={index}\r\n          visible={card.visible}\r\n          times={card.times}\r\n          id={card.id}\r\n          damage={card.dmg}\r\n          moveCard={moveCard}\r\n        />\r\n      )\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <div className=\"container-bottom overflow-scroll\">\r\n            <Row noGutters>\r\n                <Col>\r\n                  { damages.length > 0 ?\r\n                    <h5 className=\"text-left bottom-border p-1\">Drag to reorder</h5> :\r\n                    <h5 className=\"text-left p-1 muted\">\r\n                      Click \"Add to simulator\" in one of the calculators above to get started.\r\n                    </h5>\r\n                  }\r\n                </Col>\r\n            </Row>\r\n          {damages.map((card: DamageItem, i: number) => renderCard(card, i))}\r\n        </div>\r\n      </>\r\n    )\r\n  \r\n}\r\n","import { useState } from \"react\";\r\nimport { Form, Table } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectDamages, selectEntity } from \"../activeSlice\";\r\nimport { DamageItem } from \"../calculations/damage\";\r\nimport { Entity, maxHealth, summary } from \"../calculations/entity\";\r\nimport { takeDamage } from \"../utility/maths\";\r\nimport { elementwiseAdd, getColor, getDeltaColor, getPresetColor, round } from \"../utility/Utils\";\r\nimport { getSeconds } from \"../weapon/weapon\";\r\n\r\nexport function Simulator() {\r\n    const entities = useSelector(selectEntity);\r\n    const damages = useSelector(selectDamages);\r\n    const [percent, setPercent] = useState(false);\r\n    const [showChanges, setShowChanges] = useState(false);\r\n    const [showSteps, setShowSteps] = useState(true);\r\n    const renderSettings = () => {\r\n        return (\r\n            <Form className=\"text-left p-1\">\r\n                <div key={\"sim-settings\"}>\r\n                    <Form.Check custom inline label={\"Steps\"} type=\"checkbox\" name=\"sim-settings\"\r\n                        checked={showSteps}\r\n                        id={`simulator-settings-2`}\r\n                        onChange={ (e) => setShowSteps(!showSteps)}\r\n                    />\r\n                    <Form.Check custom inline label={\"Changes\"} type=\"checkbox\" name=\"sim-settings\"\r\n                        checked={showChanges}\r\n                        id={`simulator-settings-1`}\r\n                        onChange={ (e) => setShowChanges(!showChanges)}\r\n                    />\r\n                    \r\n                    <Form.Check custom inline label={\"Percents\"} type=\"checkbox\" name=\"sim-settings\"\r\n                        checked={percent}\r\n                        id={`simulator-settings-3`}\r\n                        onChange={ (e) => setPercent(!percent)}\r\n                    />\r\n                </div>\r\n            </Form>\r\n        );\r\n    }\r\n    const renderHeader = () => {\r\n        return (\r\n            <>\r\n            <th>\r\n            Attack\r\n            </th>\r\n            <th>\r\n            Time\r\n            </th>\r\n            {entities.map( (item: Entity, index: number) => {\r\n                return (\r\n                    <>\r\n                    \r\n                    <th style={{\r\n                        borderBottomColor: getPresetColor(index),\r\n                        borderBottomWidth: 3,\r\n                        borderBottomStyle: \"solid\",\r\n                        color: getPresetColor(index)\r\n                    }}>\r\n                        {summary(item)}\r\n                    </th>\r\n                    </>\r\n            )})}\r\n            </>\r\n        );\r\n    }\r\n    const renderBody = () => {\r\n        let hp = entities.map((item: Entity) => maxHealth(item));\r\n        let time = 0;\r\n        let maxHp = entities.map((item: Entity) => maxHealth(item));\r\n        const renderDamages = () => {\r\n            let initial = (\r\n                <SimulatorRow\r\n                    deltaTime={0}\r\n                    newTime={time}\r\n                    deltaHp={entities.map( (item: any) => 0)}\r\n                    newHp={hp}\r\n                    maxHp={maxHp}\r\n                    index={-1}\r\n                    percent={percent}\r\n                    type={\"Initial\"}\r\n                    showChanges={false}\r\n                    showResults={true}\r\n                />\r\n            );\r\n            let rows = damages.map( (damageItem: DamageItem, index: number) => {\r\n                if (damageItem.visible === false) {\r\n                    return \"\";\r\n                }\r\n                let elements = [];\r\n                for (let i = 0 ; i < damageItem.times ; i++) {\r\n                    let damage = damageItem.dmg;\r\n\r\n                    //update the values one step forward\r\n                    time += damage.ticks;\r\n                    let deltaHp = entities.map( (entity: Entity) => {\r\n                        return -takeDamage(damage, entity);\r\n                    });\r\n                    hp = elementwiseAdd(hp, deltaHp);\r\n                    \r\n                    elements.push (<SimulatorRow\r\n                        deltaTime={damage.ticks}\r\n                        newTime={time}\r\n                        deltaHp={deltaHp}\r\n                        newHp={hp}\r\n                        maxHp={maxHp}\r\n                        index={index}\r\n                        percent={percent}\r\n                        type={damage.type}\r\n                        showChanges={showChanges}\r\n                        showResults={showSteps}\r\n                    />);\r\n                }\r\n                return <>{elements}</>\r\n            })\r\n\r\n            return (<>\r\n                {initial}\r\n                <SimulatorRow\r\n                deltaTime={0} deltaHp={[0]}\r\n                newTime={time} newHp={hp}\r\n                maxHp={maxHp} index={-2}\r\n                percent={percent}\r\n                type={\"Final Result\"}\r\n                showChanges={false}\r\n                showResults={true}\r\n                />\r\n                {showChanges || showSteps ? renderHeader() : \"\"}\r\n                {rows}\r\n            </>);\r\n        }\r\n        return (\r\n            renderDamages()\r\n        );\r\n    }\r\n    return (\r\n        <>\r\n        <div className=\"container-bottom\">\r\n            {renderSettings()}\r\n        </div>\r\n        <div className=\"container-bottom overflow-scroll h-simulator h-simulator-container\">\r\n            \r\n        <Table className=\"simulator-table text-left\">\r\n            <thead>\r\n                <tr>\r\n                    \r\n                    {renderHeader()}\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {renderBody()}\r\n            </tbody>\r\n        </Table>\r\n        </div>\r\n        </>\r\n    );\r\n}\r\ninterface SimulatorRowType {\r\n    deltaTime: number,\r\n    newTime: number,\r\n    deltaHp: number[],\r\n    newHp: number[],\r\n    maxHp: number[],\r\n    index: number,\r\n    percent: boolean,\r\n    type: string,\r\n    showChanges: boolean,\r\n    showResults: boolean\r\n}\r\nexport function SimulatorRow(props: SimulatorRowType) {\r\n    const [hover, setHover] = useState(false);\r\n    const getPercent = (num: number, index: number) => {\r\n        return round(num*100 / props.maxHp[index]);\r\n    }\r\n    const getContent = (num: number, index: number) => {\r\n        if (props.percent) {\r\n            return getPercent(num, index) + \"%\";\r\n        } else {\r\n            return round(num);\r\n        }\r\n    }\r\n    const renderDeltas = () => {\r\n        return (\r\n            <tr onMouseEnter={() => setHover(true)} onMouseLeave={() => setHover(false)}>\r\n                <td id={\"sim-delta-\" + props.index} className=\"type-display\">\r\n                    {renderName()}\r\n                </td>\r\n                <td>\r\n                    +{getSeconds(props.deltaTime)} sec\r\n                </td>\r\n                {\r\n                props.deltaHp.map( (num, index) => {\r\n                    return (\r\n                    <td style={{backgroundColor:getDeltaColor(35,getPercent(num, index))}}>\r\n                        {getContent(num, index)}\r\n                    </td>);\r\n                })\r\n                }\r\n            </tr>\r\n        );\r\n    }\r\n    const renderResults = () => {\r\n        return (\r\n            <tr onMouseEnter={() => setHover(true)} onMouseLeave={() => setHover(false)}>\r\n                <td id={\"sim-result-\" + props.index} className=\"type-display\">\r\n                    {!props.showChanges ? renderName() : \"\"}\r\n                </td>\r\n                <td>\r\n                    {getSeconds(props.newTime)} sec\r\n                </td>\r\n                {\r\n                props.newHp.map( (num, index) => {\r\n                    return (\r\n                    <td style={{backgroundColor:getColor(100,getPercent(num, index))}}>\r\n                        {getContent(num, index)}\r\n                    </td>)\r\n                })\r\n                }\r\n            </tr>\r\n        );\r\n    }\r\n    const renderName = () => {\r\n        return (\r\n            hover ?\r\n            props.type :\r\n            props.type.substring(0, 25)\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n        {props.showChanges ? renderDeltas() : \"\"}\r\n        {props.showResults ? renderResults() : \"\"}\r\n        </>\r\n    );\r\n}","import { Row, Col, Button } from \"react-bootstrap\";\r\nconst Scroll   = require('react-scroll');\r\nconst Element  = Scroll.Element;\r\nconst scroller = Scroll.scroller;\r\nexport function SimulatorHeader() {\r\n    return (\r\n        <div className=\"container-top text-right\">\r\n            <Row noGutters>\r\n            <Col>\r\n            <Element name=\"simulator-link\"></Element>\r\n            <h3 className=\"text-left bottom-border p-1\">Simulator</h3>\r\n            <Button onClick={() => {\r\n                scroller.scrollTo('setup-link', {\r\n                    duration: 500,\r\n                    smooth: true})\r\n            }}>Jump to Setups</Button>\r\n            <Button onClick={() => {\r\n                scroller.scrollTo('damage-link', {\r\n                    duration: 500,\r\n                    smooth: true})\r\n            }}>Jump to Damage Calculators</Button>\r\n            \r\n            </Col>\r\n            </Row>\r\n        </div>\r\n    );\r\n}","import React from 'react';\nimport { Col, Container, Nav, Navbar, Row } from 'react-bootstrap';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport './App.css';\nimport './cc.scss';\nimport { DamageCalculator } from './features/calculator/DamageCalculator';\nimport { SetupContainer } from './features/setups/SetupContainer';\nimport { DragContainer } from './features/simulator/DragContainer';\nimport { Simulator } from './features/simulator/Simulator';\nimport { SimulatorHeader } from './features/simulator/SimulatorHeader';\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Container fluid className=\"main-container\">\n        <Navbar bg=\"danger\" expand=\"lg\">\n          <Nav className=\"mr-auto main-header\">\n            Minecraft Combat Simulator\n          </Nav>\n        </Navbar>\n        <Row>\n        <Col sm={12} md={12} lg={12} xl={5}>\n          <SetupContainer />\n        </Col>\n        <Col sm={12} md={12} lg={12} xl={7}>\n          <DamageCalculator />\n        </Col>\n        </Row>\n        <Row>\n          <Col>\n            <SimulatorHeader/>\n          </Col>\n        </Row>\n        <Row className=\"\">\n          <Col sm={12} md={12} lg={4} className=\"overflow-scroll h-simulator\">\n          <DndProvider backend={HTML5Backend}>\n            <DragContainer />\n          </DndProvider>\n          </Col>\n          <Col sm={12} md={12} lg={8} className=\"\">\n            <Simulator />\n          </Col>\n        </Row>\n      </Container>\n      {/*\n      <header className=\"App-header\">\n        \n        <Counter />\n        <Active />\n      </header>\n      */}\n    </div>\n  );\n}\n\nexport default App;\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\nimport activeReducer from '../features/activeSlice'; \nexport const store = configureStore({\n  reducer: {\n    active: activeReducer\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { store } from './app/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}